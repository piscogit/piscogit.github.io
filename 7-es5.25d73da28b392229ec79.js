!function(){function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PWTB:function(e,t,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},TaIo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n("PWTB"))&&r.__esModule?r:{default:r};t.default=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{t=window.fetch}catch(i){t=o.default}try{var r="https://spreadsheets.google.com/feeds/cells/".concat(e,"/").concat(n,"/public/values?alt=json-in-script");return t(r).then((function(e){if(!e.ok)throw console.log("there is an error in the gsheets response"),new Error("Error fetching GSheet");return e.text()})).then((function(e){var t=e.replace("gdata.io.handleScriptLoaded(","").slice(0,-2);return JSON.parse(t)})).catch((function(e){throw new Error("Failed to fetch from GSheets API. Check your Sheet Id and the public availability of your GSheet.")}))}catch(i){throw new Error("General error when fetching GSheet: ".concat(i))}}},Z6ku:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n("TaIo"))&&r.__esModule?r:{default:r};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e,t,n){return(0,o.default)(e.sheetId,e.sheetNumber?e.sheetNumber:1).then((function(n){var r=function(e,t,n,r){var o,a=[{}],c={},u=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw a}}}}(e.feed.entry);try{for(u.s();!(o=u.n()).done;){var s=o.value.gs$cell,l=s.$t,f=s.col,d=s.row,h=c[f];d<2?c[f]=l.toLowerCase():(void 0===a[d]&&(a[d]={}),void 0!==h&&h.length>0&&(a[d][h]=l))}}catch(v){u.e(v)}finally{u.f()}return a=a.filter((function(e){return Object.keys(e).length})),t||!n?a:function(e,t,n){return e.filter((function(e){var r=null,o=[];return!(void 0===e||e.length<=0||Object.keys(e).length<=0)&&(Object.keys(t).forEach((function(r){o.push(function(e,t,n){try{if(void 0!==e){if(e=e.toLowerCase().trim(),t=t.toLowerCase().trim(),"strict"===n)return e===t;if("loose"===n)return e.includes(t)||e==t}}catch(r){return console.log("error in matchValues: ".concat(r.message)),!1}return!1}(e[r],t[r],n.matching||"loose"))})),"or"===n.operator&&(r=o.some((function(e){return!0===e}))),"and"===n.operator&&(r=o.every((function(e){return!0===e}))),r)}))}(a,n,r)}(n,e.returnAllResults||!1,e.filter||!1,e.filterOptions||{operator:"or",matching:"loose"});t(r)})).catch((function(e){return n(e.message)}))}},sMI2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n("Z6ku"))&&r.__esModule?r:{default:r},i=function(e,t,n){return(0,o.default)(e,(function(e){t(e)}),(function(e){if(!n)throw new Error("g-sheets-api error: ".concat(e));n(e)}))};e.exports=i,t.default=i},x5Jj:function(t,r,i){"use strict";i.r(r),i.d(r,"PouchbPlayPageModule",(function(){return D}));var a,c,u,s,l=i("ofXK"),f=i("3Pt+"),d=i("TEn/"),h=i("tyNb"),v=i("mrSG"),b=i("fXoL"),p=i("h7jJ"),g=i("4UqN"),m=i("sMI2"),y=i("6nr9"),w=i("ufmx"),k=i("pQKU"),S=i("Gwuq"),x=i("L5fO"),M=i("VYsW"),j=((a=function(){function t(e,r,o,i,a,c){n(this,t),this.settingsService=e,this.candidatesDelegator=r,this.basketsDelegator=o,this.formsDelegator=i,this.langProvider=a,this.appContext=c}return o(t,[{key:"validate",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.appContext.getAppContext(),e.next=3,this.getValidationData();case 3:n=e.sent,e.t0=t.activationCode,e.next="c1"===e.t0?7:"c2"===e.t0||"c3"===e.t0?10:11;break;case 7:return e.next=9,this.validateMain(t.user,n);case 9:case 10:return e.abrupt("break",12);case 11:throw new Error("Unknown Activation Code: "+t.activationCode);case 12:return e.abrupt("return",JSON.stringify(n,null,2));case 13:case"end":return e.stop()}}),e,this)})))}},{key:"validateMain",value:function(t,n){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,i,a,c,u,s,l,f,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.filter((function(e){return Object.keys(e).map((function(e){return e.toLocaleLowerCase()})).filter((function(t){return"1"===e.active})).filter((function(e){return e.startsWith("angel")})).filter((function(n){return e[n]===t})).length>0})),r.next=3,this.candidatesDelegator.getCandidates();case 3:i=r.sent,a=[],c=[],u=e(o);try{for(l=function(){var e=s.value,t=i.find((function(t){return t.group===e.group&&t.number.toString()===e.number}));t?(c.push(t),e.id=t._id):a.push(e)},u.s();!(s=u.n()).done;)l()}catch(h){u.e(h)}finally{u.f()}if(!((f=c.filter((function(e){return!e.isActive}))).length>0)){r.next=11;break}throw new Error("".concat(this.langProvider.DataValidationActiveStatusNotMatch,"\n\n").concat(this.langProvider.Candidates,": ").concat(f.map((function(e){return e.number}))));case 11:if(!(a.length>0)){r.next=13;break}throw new Error("".concat(this.langProvider.DataValidationMissingCandidates,"\n\n").concat(this.langProvider.Candidates,": ").concat(a.map((function(e){return e.number}))));case 13:return r.next=15,this.formsDelegator.getFormTaskMain("t_gibushFinalForm");case 15:if(d=r.sent){r.next=18;break}throw new Error(""+this.langProvider.DataValidationMissingCandidateForms);case 18:if(o.every((function(e){return d.coverage.full.findIndex((function(t){return e.id===t}))>-1}))){r.next=20;break}throw new Error(""+this.langProvider.DataValidationMissingCandidateForms);case 20:return r.abrupt("return",!0);case 21:case"end":return r.stop()}}),r,this)})))}},{key:"validateInterview",value:function(e,t){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(t.filter((function(t){return Object.keys(t).map((function(e){return e.toLocaleLowerCase()})).filter((function(e){return e.startsWith("interview")})).filter((function(n){return t[n]===e})).length>0})),!0));case 1:case"end":return n.stop()}}),n)})))}},{key:"validateSocio",value:function(e,t){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(t.filter((function(t){return Object.keys(t).map((function(e){return e.toLocaleLowerCase()})).filter((function(e){return"1"===t.active})).filter((function(e){return e.startsWith("socio")})).filter((function(n){return t[n]===e})).length>0})),!0));case 1:case"end":return n.stop()}}),n)})))}},{key:"getValidationData",value:function(){var e=this;return new Promise((function(t,n){var r=new RegExp("https://docs.google.com/spreadsheets/d/(.*)/"),o=e.settingsService.getSettingsItem("validationSheetUri"),i={sheetId:r.exec(o)[1],returnAllResults:!0};try{m(i,(function(e){t(e)}))}catch(a){n(a)}}))}}]),t}()).\u0275fac=function(e){return new(e||a)(b.Rb(y.a),b.Rb(w.a),b.Rb(k.a),b.Rb(S.a),b.Rb(x.b),b.Rb(M.a))},a.\u0275prov=b.Eb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),R=i("nbnm"),O=i("zrcv"),P=["video"],C=[{path:"",component:(c=function(){function e(t,r,o,i,a,c){n(this,e),this.dataProvider=t,this.setupService=r,this.validationService=o,this.settingsService=i,this.entityNamer=a,this.msgService=c}return o(e,[{key:"ngOnInit",value:function(){}},{key:"sync",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataProvider.syncToCouch();case 2:return e.next=4,this.msgService.showToast("DB Synced",500);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"dropDb",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setupService.clearSetup();case 2:return e.next=4,this.dataProvider.dropDb();case 4:return location.reload(),e.next=7,this.msgService.showToast("DB Dropped",500);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"compactDb",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataProvider.compactDb();case 2:return e.next=4,this.msgService.showToast("DB Compacted",500);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getAllTasks",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataProvider.getAllTasks();case 2:t=e.sent,this.msgService.showModal(JSON.stringify(t));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"googleSheet",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validationService.validate();case 3:t=e.sent,this.msgService.showModal(t,null,"ltr"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.msgService.showModal(null==e.t0?void 0:e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"playVideo",value:function(){this.videoSrc="./assets/videos/VID-20200320-WA0027.mp4",this.videoPlayer.nativeElement.load(),this.videoPlayer.nativeElement.play()}},{key:"sendMail",value:function(){return Object(v.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=encodeURI(this.entityNamer.userPrefix()),n=this.settingsService.getSettingsItem("targetDataMail"),e.next=4,this.dataProvider.getAllDocs();case 4:r=e.sent,o=JSON.stringify(r),window.location.href="mailto:".concat(n,"?subject=").concat(t,"&body=").concat(o);case 7:case"end":return e.stop()}}),e,this)})))}}]),e}(),c.\u0275fac=function(e){return new(e||c)(b.Ib(p.a),b.Ib(g.a),b.Ib(j),b.Ib(y.a),b.Ib(R.a),b.Ib(O.a))},c.\u0275cmp=b.Cb({type:c,selectors:[["app-pouchb-play"]],viewQuery:function(e,t){var n;1&e&&b.vc(P,!0),2&e&&b.gc(n=b.Wb())&&(t.videoPlayer=n.first)},decls:21,vars:0,consts:[["slot","end"],["defaultHref","/"],["expand","full","color","secondary",3,"click"]],template:function(e,t){1&e&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons",0),b.Jb(3,"ion-back-button",1),b.Mb(),b.Nb(4,"ion-title"),b.pc(5,"pouchbPlay"),b.Mb(),b.Mb(),b.Mb(),b.Nb(6,"ion-content"),b.Nb(7,"ion-button",2),b.Vb("click",(function(){return t.dropDb()})),b.pc(8,"Drop DB"),b.Mb(),b.Nb(9,"ion-button",2),b.Vb("click",(function(){return t.sync()})),b.pc(10,"Sync"),b.Mb(),b.Nb(11,"ion-button",2),b.Vb("click",(function(){return t.compactDb()})),b.pc(12,"Compact DB"),b.Mb(),b.Nb(13,"ion-button",2),b.Vb("click",(function(){return t.getAllTasks()})),b.pc(14,"Get All Tasks"),b.Mb(),b.Nb(15,"ion-button",2),b.Vb("click",(function(){return t.googleSheet()})),b.pc(16,"Google Sheet"),b.Mb(),b.Nb(17,"ion-button",2),b.Vb("click",(function(){return t.playVideo()})),b.pc(18,"Video"),b.Mb(),b.Nb(19,"ion-button",2),b.Vb("click",(function(){return t.sendMail()})),b.pc(20,"Mail"),b.Mb(),b.Mb())},directives:[d.s,d.Z,d.k,d.g,d.h,d.X,d.n,d.j],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}.video[_ngcontent-%COMP%]{height:auto;width:100%}"]}),c)}],I=((s=function e(){n(this,e)}).\u0275mod=b.Gb({type:s}),s.\u0275inj=b.Fb({factory:function(e){return new(e||s)},imports:[[h.h.forChild(C)],h.h]}),s),D=((u=function e(){n(this,e)}).\u0275mod=b.Gb({type:u}),u.\u0275inj=b.Fb({factory:function(e){return new(e||u)},imports:[[l.c,f.a,d.bb,I]]}),u)}}])}();