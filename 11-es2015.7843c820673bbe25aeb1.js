(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{x5Jj:function(t,e,i){"use strict";i.r(e),i.d(e,"PouchbPlayPageModule",function(){return k});var o=i("ofXK"),c=i("3Pt+"),n=i("TEn/"),r=i("tyNb"),s=i("mrSG"),a=i("fXoL"),d=i("h7jJ"),l=i("4UqN"),b=i("Lrti"),u=i("o6Vy"),h=i("6nr9"),v=i("nbnm"),y=i("zrcv"),f=i("VYsW"),p=i("XgeJ");let S=(()=>{class t{constructor(t,e,i){this.audioRecorderService=t,this.syncService=e,this.msgService=i,this.audioRecorderService.recorderError.subscribe(t=>{try{console.log(t)}catch(e){}try{console.log(JSON.stringify(t))}catch(i){}})}handleAudio(){return Object(s.a)(this,void 0,void 0,function*(){this.audioRecorderService.startRecording(),this.msgService.showToast("Start Recording"),yield new Promise(t=>setTimeout(t,5e3));const t=yield this.audioRecorderService.stopRecording(p.c.WEBM_BLOB);yield t.text(),yield t.arrayBuffer(),this.msgService.showToast("Stop Recording");const e=new FormData;e.append("audioFile",t);const i=yield this.syncService.uploadComment(e);return this.msgService.showToast(i.text),t})}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(p.b),a.Tb(u.a),a.Tb(y.a))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i("jhN1");const m=["video"];function P(t,e){if(1&t&&a.Lb(0,"audio",4),2&t){const t=a.Zb();a.fc("src",t.audioSrc,a.lc)}}const w=[{path:"",component:(()=>{class t{constructor(t,e,i,o,c,n,r,s,a,d,l){this.dataProvider=t,this.setupService=e,this.validationService=i,this.syncService=o,this.settingsService=c,this.entityNamer=n,this.msgService=r,this.appContext=s,this.micService=a,this.sanitizer=d,this.actionCtrl=l}ngOnInit(){}sync(){return Object(s.a)(this,void 0,void 0,function*(){yield this.dataProvider.syncToCouch(),yield this.msgService.showToast("DB Synced",500)})}dropDb(){return Object(s.a)(this,void 0,void 0,function*(){yield this.setupService.clearSetup(),yield this.dataProvider.dropDb(),location.reload(),yield this.msgService.showToast("DB Dropped",500)})}compactDb(){return Object(s.a)(this,void 0,void 0,function*(){yield this.dataProvider.compactDb(),yield this.msgService.showToast("DB Compacted",500)})}getAllTasks(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.dataProvider.getAllTasks();this.msgService.showModal(JSON.stringify(t))})}googleSheet(){return Object(s.a)(this,void 0,void 0,function*(){try{const t=yield this.validationService.validate();this.msgService.showModal(`${t}`,null,"ltr")}catch(t){this.msgService.showMessage(null==t?void 0:t.message)}})}playVideo(){this.videoSrc="./assets/videos/VID-20200320-WA0027.mp4",this.videoPlayer.nativeElement.load(),this.videoPlayer.nativeElement.play()}sendMail(){return Object(s.a)(this,void 0,void 0,function*(){const t=encodeURI(this.entityNamer.userPrefix()),e=this.settingsService.getSettingsItem("targetDataMail"),i=yield this.dataProvider.getAllDocs(),o=JSON.stringify(i);window.location.href=`mailto:${e}?subject=${t}&body=${o}`})}micStt(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.micService.handleAudio(),e=URL.createObjectURL(t),i=this.sanitizer.bypassSecurityTrustUrl(e);this.audioSrc=i})}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(d.a),a.Kb(l.a),a.Kb(b.a),a.Kb(u.a),a.Kb(h.a),a.Kb(v.a),a.Kb(y.a),a.Kb(f.a),a.Kb(S),a.Kb(g.b),a.Kb(n.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-pouchb-play"]],viewQuery:function(t,e){if(1&t&&a.xc(m,1),2&t){let t;a.ic(t=a.Yb())&&(e.videoPlayer=t.first)}},decls:24,vars:1,consts:[["slot","end"],["defaultHref","/"],["expand","full","color","secondary",3,"click"],["id","player","type","audio/webm","controls","",3,"src",4,"ngIf"],["id","player","type","audio/webm","controls","",3,"src"]],template:function(t,e){1&t&&(a.Pb(0,"ion-header"),a.Pb(1,"ion-toolbar"),a.Pb(2,"ion-buttons",0),a.Lb(3,"ion-back-button",1),a.Ob(),a.Pb(4,"ion-title"),a.rc(5,"pouchbPlay"),a.Ob(),a.Ob(),a.Ob(),a.Pb(6,"ion-content"),a.Pb(7,"ion-button",2),a.Xb("click",function(){return e.dropDb()}),a.rc(8,"Drop DB"),a.Ob(),a.Pb(9,"ion-button",2),a.Xb("click",function(){return e.sync()}),a.rc(10,"Sync"),a.Ob(),a.Pb(11,"ion-button",2),a.Xb("click",function(){return e.compactDb()}),a.rc(12,"Compact DB"),a.Ob(),a.Pb(13,"ion-button",2),a.Xb("click",function(){return e.getAllTasks()}),a.rc(14,"Get All Tasks"),a.Ob(),a.Pb(15,"ion-button",2),a.Xb("click",function(){return e.googleSheet()}),a.rc(16,"Google Sheet"),a.Ob(),a.Pb(17,"ion-button",2),a.Xb("click",function(){return e.playVideo()}),a.rc(18,"Video"),a.Ob(),a.Pb(19,"ion-button",2),a.Xb("click",function(){return e.sendMail()}),a.rc(20,"Mail"),a.Ob(),a.Pb(21,"ion-button",2),a.Xb("click",function(){return e.micStt()}),a.rc(22,"Mic Stt"),a.Ob(),a.pc(23,P,1,1,"audio",3),a.Ob()),2&t&&(a.Ab(23),a.fc("ngIf",e.audioSrc))},directives:[n.s,n.Z,n.k,n.g,n.h,n.X,n.n,n.j,o.m],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;width:100%}.video[_ngcontent-%COMP%]{height:auto;width:100%}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({imports:[[r.h.forChild(w)],r.h]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({imports:[[o.c,c.a,n.bb,O]]}),t})()}}]);