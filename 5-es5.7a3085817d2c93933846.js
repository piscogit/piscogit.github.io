!function(){function t(t,a){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,a)}(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,d=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){d=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw s}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"2lKs":function(e,n,i){"use strict";i.d(n,"a",(function(){return T}));var s=i("mrSG"),o=i("5+WD"),d=i("Mxx3"),c=i("pQKU"),u=i("43kj"),l=i("AytR"),b=i("kLqA"),v=i("fXoL"),p=i("tyNb"),f=i("zrcv"),h=i("L5fO"),k=i("TEn/"),g=i("h7jJ"),m=i("TtBN"),y=i("3Pt+"),D=i("ofXK"),C=i("g1yl");function M(t,e){if(1&t&&v.Jb(0,"app-candidate-avatar",25),2&t){var a=v.Xb().$implicit;v.dc("candidate",a)}}function w(t,e){if(1&t&&v.Jb(0,"app-candidate-avatar",25),2&t){var a=v.Xb().$implicit;v.dc("candidate",a)}}function O(t,e){if(1&t){var a=v.Ob();v.Nb(0,"ion-item",21),v.Vb("click",(function(){v.ic(a);var t=e.$implicit;return v.Xb(2).selectCandidate(t)})),v.Jb(1,"app-candidate-avatar",22),v.nc(2,M,1,1,"app-candidate-avatar",23),v.nc(3,w,1,1,"app-candidate-avatar",24),v.Mb()}if(2&t){var n=e.$implicit,r=v.Xb(2);v.dc("cdkDragStartDelay",r.dragDelay),v.yb(1),v.dc("candidate",n)}}function P(t,e){if(1&t&&v.Jb(0,"app-candidate-avatar",25),2&t){var a=v.Xb().$implicit;v.dc("candidate",a)}}function S(t,e){if(1&t&&v.Jb(0,"app-candidate-avatar",25),2&t){var a=v.Xb().$implicit;v.dc("candidate",a)}}function I(t,e){if(1&t&&(v.Nb(0,"ion-item",26),v.Nb(1,"div",27),v.Nb(2,"span",28),v.pc(3),v.Mb(),v.Jb(4,"app-candidate-avatar",22),v.Mb(),v.nc(5,P,1,1,"app-candidate-avatar",23),v.nc(6,S,1,1,"app-candidate-avatar",24),v.Mb()),2&t){var a=e.$implicit,n=e.index,r=v.Xb(2);v.ec("id","order_",a._id,""),v.dc("cdkDragStartDelay",r.dragDelay),v.yb(3),v.rc("",n+1,"."),v.yb(1),v.dc("candidate",a)}}function x(t,e){if(1&t){var a=v.Ob();v.Nb(0,"div",12),v.Nb(1,"ion-chip",13),v.Nb(2,"ion-list",14),v.Vb("cdkDropListDropped",(function(t){return v.ic(a),v.Xb().dropCandidates(t)})),v.nc(3,O,4,2,"ion-item",15),v.Mb(),v.Mb(),v.Nb(4,"ion-button",16),v.Vb("click",(function(){return v.ic(a),v.Xb().changeOrder()})),v.Jb(5,"ion-icon",17),v.Mb(),v.Nb(6,"ion-chip",18),v.Nb(7,"ion-list",19),v.Vb("cdkDropListDropped",(function(t){return v.ic(a),v.Xb().dropCandidatesOrder(t)})),v.nc(8,I,7,4,"ion-item",20),v.Mb(),v.Mb(),v.Mb()}if(2&t){var n=v.Xb();v.dc("hidden","ordered"!==n.segment),v.yb(2),v.dc("cdkDropListData",n.candidates),v.yb(1),v.dc("ngForOf",n.candidates)("ngForTrackBy",n.trackByFn),v.yb(4),v.dc("cdkDropListData",n.taskSavedData.main.orderedCandidates),v.yb(1),v.dc("ngForOf",n.taskSavedData.main.orderedCandidates)("ngForTrackBy",n.trackByFn)}}var T=function(){var e=function(){function e(t,n,r,i,s,o,c,u){a(this,e),this.router=t,this.route=n,this.msgService=r,this.langProvider=i,this.popoverController=s,this.dataProvider=o,this.basketDelegator=c,this.taskDelegator=u,this.dragDelay=d.a.DragDelay,this.segment="ordered"}return r(e,[{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initTask();case 2:return this.taskSavedData=t.sent,t.next=5,this.loadTask();case 5:this.taskSavedData=t.sent,this.isTaskInit=!0;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"initTask",value:function(){var t;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!==(t=this.route.snapshot.paramMap.get(d.a.TaskDescId))&&void 0!==t?t:"t13",this.candidates=this.dataProvider.getCandidatesCopy(),this.taskDesc=this.dataProvider.getTaskDesk(a),this.taskConfig=this.dataProvider.getTaskConfig(a),n={main:{taskId:this.taskDesc.id,type:this.taskDesc.type,name:this.taskDesc.description,orderedCandidates:[],totalCandidates:this.candidates.length},basketsSaveData:null},e.abrupt("return",(this.integratedBaskets={parentId:null,parentTaskId:this.taskDesc.id,parentTaskType:this.taskDesc.type},n));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"ionViewWillLeave",value:function(){var t;return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.taskSavedData.basketsSaveData=null===(t=this.basketPage)||void 0===t?void 0:t.taskSavedData,!this.taskDelegator.checkTaskEmpty(this.taskSavedData,this.taskConfig)){e.next=5;break}this.msgService.showToast(this.langProvider.TaskEmptyDismissed,l.a.taskSavedToastInterval),e.next=11;break;case 5:return e.next=7,this.saveTask();case 7:return this.taskSavedData=e.sent,e.next=10,this.basketPage.ionViewWillLeave();case 10:this.msgService.showToast(this.langProvider.TaskSaved,l.a.taskSavedToastInterval);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"saveTask",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.taskDelegator.saveTask(this.taskSavedData,this.taskConfig);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"loadTask",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n,r,i,s,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.route.snapshot.paramMap.get(d.a.SavedTaskId),n=this.taskSavedData,!a){e.next=9;break}return e.next=5,this.taskDelegator.loadTask(a);case 5:n=e.sent,r=t(n.main.orderedCandidates);try{for(s=function(){var t=i.value,e=o.candidates.find((function(e){return e._id===t._id}));o.selectCandidate(e)},r.s();!(i=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}this.basketPage.loadTaskIntegrated(n.basketsSaveData);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"dropCandidates",value:function(t){t.previousContainer===t.container||(Object(o.h)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.candidates=this.candidates.sort((function(t,e){return t.number-e.number})))}},{key:"dropCandidatesOrder",value:function(t){t.previousContainer===t.container?Object(o.g)(t.container.data,t.previousIndex,t.currentIndex):Object(o.h)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)}},{key:"selectCandidate",value:function(t){var e=this.candidates.findIndex((function(e){return e._id===t._id}));Object(o.h)(this.candidates,this.taskSavedData.main.orderedCandidates,e,this.taskSavedData.main.orderedCandidates.length+1)}},{key:"changeOrder",value:function(){this.taskSavedData.main.orderedCandidates.reverse()}},{key:"createComment",value:function(){this.router.navigate(["tabs/comments/create-comment",{taskDescId:this.taskDesc.id,unique:b.Guid.raw()}],{skipLocationChange:!0})}},{key:"trackByFn",value:function(t,e){return e?e._id:t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.Ib(p.g),v.Ib(p.a),v.Ib(f.a),v.Ib(h.b),v.Ib(k.fb),v.Ib(g.a),v.Ib(c.a),v.Ib(m.a))},e.\u0275cmp=v.Cb({type:e,selectors:[["app-ordered2"]],viewQuery:function(t,e){var a;1&t&&v.lc(u.a,!0),2&t&&v.gc(a=v.Wb())&&(e.basketPage=a.first)},features:[v.xb([c.a])],decls:20,vars:8,consts:[["slot","start"],["slot","end"],["defaultHref","tabs/tasks"],[3,"ngModel","ngModelChange"],["value","ordered"],["value","baskets"],[1,"content",3,"fullscreen"],[1,"container",3,"hidden","integrated"],["class","container","cdkDropListGroup","",3,"hidden",4,"ngIf"],["horizontal","end","vertical","bottom","slot","fixed","cdkDrag","","cdkDragBoundary",".content"],["color","primary",3,"click"],["name","chatbox-ellipses"],["cdkDropListGroup","",1,"container",3,"hidden"],[1,"candidatesSelection"],["lines","none","id","candidates","cdkDropList","","cdkDropListSortingDisabled","",1,"candidates",3,"cdkDropListData","cdkDropListDropped"],["class","avatarContainer","cdkDrag","",3,"cdkDragStartDelay","click",4,"ngFor","ngForOf","ngForTrackBy"],["color","light",1,"reverseOrder",3,"click"],["name","repeat"],[1,"candidatesOrder"],["lines","none","id","candidatesOrder","cdkDropList","",1,"candidates",3,"cdkDropListData","cdkDropListDropped"],["class","avatarContainer","cdkDrag","",3,"cdkDragStartDelay","id",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"avatarContainer",3,"cdkDragStartDelay","click"],[1,"avatar","avatarMargin",3,"candidate"],["class","avatar",3,"candidate",4,"cdkDragPreview"],["class","avatar",3,"candidate",4,"cdkDragPlaceholder"],[1,"avatar",3,"candidate"],["cdkDrag","",1,"avatarContainer",3,"cdkDragStartDelay","id"],[1,"avatarOrderContainer"],[1,"avatarOrder"]],template:function(t,e){1&t&&(v.Nb(0,"ion-header"),v.Nb(1,"ion-toolbar"),v.Nb(2,"ion-buttons",0),v.Jb(3,"ion-menu-button"),v.Mb(),v.Nb(4,"ion-title"),v.pc(5),v.Mb(),v.Nb(6,"ion-buttons",1),v.Jb(7,"ion-back-button",2),v.Mb(),v.Mb(),v.Nb(8,"ion-toolbar"),v.Nb(9,"ion-segment",3),v.Vb("ngModelChange",(function(t){return e.segment=t})),v.Nb(10,"ion-segment-button",4),v.pc(11),v.Mb(),v.Nb(12,"ion-segment-button",5),v.pc(13),v.Mb(),v.Mb(),v.Mb(),v.Mb(),v.Nb(14,"ion-content",6),v.Jb(15,"app-baskets",7),v.nc(16,x,9,7,"div",8),v.Nb(17,"ion-fab",9),v.Nb(18,"ion-fab-button",10),v.Vb("click",(function(){return e.createComment()})),v.Jb(19,"ion-icon",11),v.Mb(),v.Mb(),v.Mb()),2&t&&(v.yb(5),v.qc(e.taskDesc.description),v.yb(4),v.dc("ngModel",e.segment),v.yb(2),v.rc(" ",e.langProvider.Ordered," "),v.yb(2),v.rc(" ",e.langProvider.Baskets," "),v.yb(1),v.dc("fullscreen",!0),v.yb(1),v.dc("hidden","baskets"!==e.segment)("integrated",e.integratedBaskets),v.yb(1),v.dc("ngIf",e.isTaskInit))},directives:[k.r,k.W,k.k,k.E,k.U,k.g,k.h,k.L,k.gb,y.d,y.g,k.M,k.n,u.a,D.l,k.o,o.a,k.p,k.s,o.e,k.l,k.C,o.d,D.k,k.j,k.v,C.a,o.c,o.b],styles:[".container[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{height:100%;width:100%}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.candidates[_ngcontent-%COMP%]{height:100%;overflow:scroll;min-width:var(--avatar-empty-width);background:transparent}.avatarContainer[_ngcontent-%COMP%]{--background:transparent}.candidatesSelection[_ngcontent-%COMP%]{height:100%;--background:rgba(160,165,177,0.541)}.candidatesOrder[_ngcontent-%COMP%]{height:100%;--background:rgba(157,186,250,0.541)}.avatarOrderContainer[_ngcontent-%COMP%]{display:flex;align-items:center}.avatarOrder[_ngcontent-%COMP%]{margin-right:1rem}.avatar[_ngcontent-%COMP%]{height:var(--avatar-height);width:var(--avatar-width)}.avatarMargin[_ngcontent-%COMP%]{margin:var(--avatar-margin)}.reverseOrder[_ngcontent-%COMP%]{margin-top:20%}"]}),e}()},TtBN:function(e,n,i){"use strict";i.d(n,"a",(function(){return I}));var s,o=i("mrSG"),d=i("fXoL"),c=((s=function(){function e(){a(this,e)}return r(e,[{key:"ngOnInit",value:function(){this.calcHistory()}},{key:"calcHistory",value:function(){var e,a=this,n=[],r=t(this.tasks);try{for(r.s();!(e=r.n()).done;){var i=e.value,s={total:i.orderedCandidates.length,position:i.orderedCandidates.findIndex((function(t){return t._id===a.candidate._id})),date:i.date};n.push(s)}}catch(o){r.e(o)}finally{r.f()}}}]),e}()).\u0275fac=function(t){return new(t||s)},s.\u0275cmp=d.Cb({type:s,selectors:[["app-ordered-candidate-history-agg"]],inputs:{tasks:"tasks",candidate:"candidate"},decls:2,vars:0,template:function(t,e){1&t&&(d.Nb(0,"p"),d.pc(1," ordered-candidate-history-agg works!\n"),d.Mb())},styles:[""]}),s),u=i("pQKU"),l=i("L5fO"),b=i("ofXK"),v=i("TEn/");function p(t,e){if(1&t&&(d.Nb(0,"span"),d.pc(1),d.Mb()),2&t){var a=d.Xb(2);d.yb(1),d.sc("",a.langProvider.Position," : ",a.item.position,"")}}function f(t,e){if(1&t&&(d.Nb(0,"span"),d.pc(1),d.Mb()),2&t){var a=d.Xb(2);d.yb(1),d.qc(a.langProvider.NotParticipate)}}function h(t,e){if(1&t&&(d.Nb(0,"span"),d.pc(1),d.Mb()),2&t){var a=d.Xb().$implicit,n=d.Xb(3);d.yb(1),d.sc(" ",n.langProvider.Total," : ",a.value.total," ")}}function k(t,e){if(1&t&&(d.Nb(0,"div"),d.Nb(1,"span"),d.pc(2),d.Mb(),d.nc(3,h,2,2,"span",0),d.Mb()),2&t){var a=e.$implicit;d.yb(2),d.qc(a.key),d.yb(1),d.dc("ngIf",a.value.total>1)}}function g(t,e){if(1&t&&(d.Lb(0,5),d.Nb(1,"span"),d.pc(2),d.Mb(),d.nc(3,k,4,2,"div",6),d.Yb(4,"keyvalue"),d.Kb()),2&t){var a=d.Xb(2);d.yb(2),d.rc("",a.langProvider.Tags,":"),d.yb(1),d.dc("ngForOf",d.Zb(4,2,a.item.basketItems))}}function m(t,e){if(1&t&&(d.Lb(0),d.Nb(1,"ion-item"),d.Nb(2,"ion-label"),d.Nb(3,"div",1),d.Nb(4,"span"),d.pc(5),d.Mb(),d.Nb(6,"span",2),d.pc(7),d.Yb(8,"date"),d.Mb(),d.Mb(),d.Nb(9,"div",3),d.Nb(10,"span"),d.pc(11),d.Mb(),d.nc(12,p,2,2,"span",0),d.nc(13,f,2,1,"span",0),d.Mb(),d.nc(14,g,5,4,"ng-container",4),d.Mb(),d.Mb(),d.Kb()),2&t){var a=d.Xb();d.yb(1),d.mc("direction",a.langProvider.LangDirection),d.yb(4),d.qc(a.task.name),d.yb(2),d.qc(d.ac(8,11,a.task.date,"dd/MM/yy HH:mm:ss")),d.yb(2),d.mc("direction",a.langProvider.LangDirection),d.yb(2),d.sc("",a.langProvider.TotalParticipants," : ",a.item.total,""),d.yb(1),d.dc("ngIf",a.item.position>0),d.yb(1),d.dc("ngIf",0===a.item.position),d.yb(1),d.dc("ngIf",a.item.basketItems)}}var y,D,C,M=((D=function(){function t(e,n,r){a(this,t),this.taskDelegator=e,this.basketsDelegator=n,this.langProvider=r}return r(t,[{key:"ngOnInit",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.calcHistory();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"calcHistory",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.taskDelegator.loadTask(this.task._id);case 2:this.taskSaveData=t.sent,this.item={total:this.task.orderedCandidates.length,position:this.task.orderedCandidates.findIndex((function(t){return t._id===a.candidate._id}))+1,date:new Date(this.task.date)},e=this.basketsDelegator.GetBasketsForCandidate(this.candidate._id,this.taskSaveData.basketsSaveData.main),Object.keys(e).length>0&&(this.item.basketItems=e),this.isInit=!0;case 6:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||D)(d.Ib(I),d.Ib(u.a),d.Ib(l.b))},D.\u0275cmp=d.Cb({type:D,selectors:[["app-ordered-candidate-history"]],inputs:{task:"task",candidate:"candidate"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"header"],[2,"direction","ltr"],[1,"order"],["style","white-space: normal;",4,"ngIf"],[2,"white-space","normal"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&d.nc(0,m,15,14,"ng-container",0),2&t&&d.dc("ngIf",e.isInit)},directives:[b.l,v.v,v.B,b.k],pipes:[b.d,b.f],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.header[_ngcontent-%COMP%], .order[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}"]}),D),w=((y=function(){function t(e){a(this,t),this.langProvider=e}return r(t,[{key:"ngOnInit",value:function(){this.calcHistory()}},{key:"calcHistory",value:function(){this.totalParticipated=this.task.orderedCandidates.length,this.totalCandidates=this.task.totalCandidates;var t=this.totalParticipated/this.totalCandidates;this.completedStatus=1===t?"full":t>=.5?"half":"none"}}]),t}()).\u0275fac=function(t){return new(t||y)(d.Ib(l.b))},y.\u0275cmp=d.Cb({type:y,selectors:[["app-ordered-history"]],inputs:{task:"task",candidates:"candidates"},decls:5,vars:11,consts:[[1,"container"]],template:function(t,e){1&t&&(d.Nb(0,"div",0),d.Nb(1,"span"),d.pc(2),d.Mb(),d.Nb(3,"span"),d.pc(4),d.Mb(),d.Mb()),2&t&&(d.mc("direction",e.langProvider.LangDirection),d.Ab("completed","full"===e.completedStatus)("halfCompleted","half"===e.completedStatus)("notCompleted","none"===e.completedStatus),d.yb(2),d.qc(e.langProvider.TotalParticipants),d.yb(2),d.sc("",e.totalCandidates," / ",e.totalParticipated,""))},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.completed[_ngcontent-%COMP%]{color:green}.halfCompleted[_ngcontent-%COMP%]{color:orange}.notCompleted[_ngcontent-%COMP%]{color:red}"]}),y),O=i("2lKs"),P=i("nbnm"),S=i("h7jJ"),I=((C=function(){function t(e,n){a(this,t),this.entityNamer=e,this.dataProvider=n}return r(t,[{key:"getTaskConfig",value:function(t){throw new Error("Method not implemented.")}},{key:"getTaskName",value:function(){throw new Error("Method not implemented.")}},{key:"saveTask",value:function(t,e){var a,n,r,i;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],t.main._id=null!==(a=t.main._id)&&void 0!==a?a:this.entityNamer.taskPrefixWithUniqueIdAnd(t.main.type,t.main.taskId),t.main._rev=t.main._rev,t.main.date=null!==(n=t.main.date)&&void 0!==n?n:new Date,t.main.updateDate=new Date,s.push(t.main),t.basketsSaveData.main._id=null!==(r=t.basketsSaveData.main._id)&&void 0!==r?r:""+t.main._id.replace("main","baskets"),t.basketsSaveData.main._rev=t.basketsSaveData.main._rev,t.basketsSaveData.main.date=null!==(i=t.basketsSaveData.main.date)&&void 0!==i?i:new Date,t.basketsSaveData.main.updateDate=new Date,s.push(t.basketsSaveData.main),e.next=13,this.dataProvider.saveEntities(s);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})))}},{key:"loadTask",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataProvider.loadTask(t);case 2:return a=e.sent,n=a._id.replace("main","baskets"),e.t0=a,e.next=7,this.dataProvider.loadEntities(n);case 7:return e.t1=e.sent[0],e.t2={main:e.t1},e.abrupt("return",{main:e.t0,basketsSaveData:e.t2});case 10:case"end":return e.stop()}}),e,this)})))}},{key:"deleteTask",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t],n=t._id.replace("main","baskets"),e.next=3,this.dataProvider.loadEntities(n,{includeDocs:!1});case 3:return e.sent.forEach((function(t){return a.push(t)})),e.next=6,this.dataProvider.deleteEntities(a);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getTaskHistory",value:function(){throw new Error("Method not implemented.")}},{key:"getComponent",value:function(){return O.a}},{key:"getHistoryComponent",value:function(){return w}},{key:"getCandidateHistoryComponent",value:function(){return M}},{key:"getCandidateAggregateComponent",value:function(){return c}},{key:"getTasksForCandidates",value:function(t){throw new Error("Method not implemented.")}},{key:"checkTaskEmpty",value:function(t,e){var a,n=(null===(a=t.main.orderedCandidates)||void 0===a?void 0:a.length)>0,r=Object.keys(t.basketsSaveData.main.baskets).some((function(e){var a,n;return(null===(n=null===(a=t.basketsSaveData.main.baskets[e])||void 0===a?void 0:a.all)||void 0===n?void 0:n.length)>0}));return!(t.main._id||n||r)}}]),t}()).\u0275fac=function(t){return new(t||C)(d.Rb(P.a),d.Rb(S.a))},C.\u0275prov=d.Eb({token:C,factory:C.\u0275fac,providedIn:"root"}),C)}}])}();