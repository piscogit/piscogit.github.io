(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5Ma4":function(t,e,i){"use strict";i.r(e),i.d(e,"CandidtesPageModule",(function(){return I}));var n=i("ofXK"),a=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),d=i("mrSG"),s=i("fXoL"),c=i("L5fO");let l=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}applyFilters(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(o.Eb),s.Ib(c.b))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-candidates-filter"]],inputs:{status:"status"},decls:20,vars:9,consts:[["translucent","true"],[3,"value"],["button","",3,"click"],["slot","start","value","active"],["slot","start","value","notActive"],["slot","start","value","all"]],template:function(t,e){1&t&&(s.Nb(0,"ion-header",0),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.Nb(3,"span"),s.qc(4),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(5,"ion-content"),s.Nb(6,"ion-list"),s.Nb(7,"ion-radio-group",1),s.Nb(8,"ion-item",2),s.Vb("click",(function(){return e.applyFilters("active")})),s.Nb(9,"ion-label"),s.qc(10),s.Mb(),s.Jb(11,"ion-radio",3),s.Mb(),s.Nb(12,"ion-item",2),s.Vb("click",(function(){return e.applyFilters("notActive")})),s.Nb(13,"ion-label"),s.qc(14),s.Mb(),s.Jb(15,"ion-radio",4),s.Mb(),s.Nb(16,"ion-item",2),s.Vb("click",(function(){return e.applyFilters("all")})),s.Nb(17,"ion-label"),s.qc(18),s.Mb(),s.Jb(19,"ion-radio",5),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.yb(2),s.nc("direction",e.langProvider.LangDirection),s.yb(2),s.rc(e.langProvider.Select),s.yb(2),s.nc("direction",e.langProvider.LangDirection),s.yb(1),s.dc("value",e.status),s.yb(3),s.rc(e.langProvider.CandidatesFilterActive),s.yb(4),s.rc(e.langProvider.CandidatesFilterNotActive),s.yb(4),s.rc(e.langProvider.CandidatesFilterAll))},directives:[o.B,o.zb,o.xb,o.u,o.O,o.Y,o.Mb,o.H,o.N,o.X,o.Kb],styles:[""]}),t})();function b(t,e){if(1&t){const t=s.Ob();s.Nb(0,"ion-item"),s.Nb(1,"ion-label",10),s.Nb(2,"span"),s.qc(3),s.Mb(),s.Mb(),s.Nb(4,"ion-input",16),s.Vb("ngModelChange",(function(e){return s.ic(t),s.Xb().candidateNewGroup=e})),s.Mb(),s.Mb()}if(2&t){const t=s.Xb();s.yb(3),s.rc(t.langProvider.CreateCandidateNewGroup),s.yb(1),s.dc("ngModel",t.candidateNewGroup)}}let u=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}back(){this.modalCtrl.dismiss()}activate(){return Object(d.a)(this,void 0,void 0,(function*(){const t=[];if(this.candidateLastNumber>0)for(let e=this.candidateFirstNumber;e<=this.candidateLastNumber;e++)t.push(e);else t.push(this.candidateFirstNumber);this.modalCtrl.dismiss({numbers:t,group:this.candidateGroup,newGroup:this.candidateNewGroup})}))}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(o.Eb),s.Ib(c.b))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-create-candidates"]],inputs:{title:"title",action:"action",actionColor:"actionColor",isNewGroup:"isNewGroup"},decls:34,vars:15,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"container"],[3,"ngSubmit"],["form","ngForm"],["justify-content-center",""],["align-self-center","","size-md","6","size-lg","5","size-xs","12"],["text-center",""],["padding",""],["position","floating"],["name","candidateNumber","type","number","autofocus","true","required","",3,"placeholder","ngModel","ngModelChange"],["name","totalCandidates","type","number",3,"placeholder","ngModel","ngModelChange"],["name","candidateGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["size","large","type","submit","expand","block",3,"color","disabled"],["name","candidateNewGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-title"),s.qc(3),s.Mb(),s.Nb(4,"ion-buttons",0),s.Nb(5,"ion-button",1),s.Vb("click",(function(){return e.back()})),s.Jb(6,"ion-icon",2),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(7,"div",3),s.Nb(8,"form",4,5),s.Vb("ngSubmit",(function(){return e.activate()})),s.Nb(10,"ion-grid"),s.Nb(11,"ion-row",6),s.Nb(12,"ion-col",7),s.Jb(13,"div",8),s.Nb(14,"div",9),s.Nb(15,"ion-item"),s.Nb(16,"ion-label",10),s.Nb(17,"span"),s.qc(18),s.Mb(),s.Mb(),s.Nb(19,"ion-input",11),s.Vb("ngModelChange",(function(t){return e.candidateFirstNumber=t})),s.Mb(),s.Mb(),s.Nb(20,"ion-item"),s.Nb(21,"ion-label",10),s.Nb(22,"span"),s.qc(23),s.Mb(),s.Mb(),s.Nb(24,"ion-input",12),s.Vb("ngModelChange",(function(t){return e.candidateLastNumber=t})),s.Mb(),s.Mb(),s.Nb(25,"ion-item"),s.Nb(26,"ion-label",10),s.Nb(27,"span"),s.qc(28),s.Mb(),s.Mb(),s.Nb(29,"ion-input",13),s.Vb("ngModelChange",(function(t){return e.candidateGroup=t})),s.Mb(),s.Mb(),s.oc(30,b,5,2,"ion-item",14),s.Mb(),s.Nb(31,"div",9),s.Nb(32,"ion-button",15),s.qc(33),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t){const t=s.hc(9);s.yb(2),s.nc("direction",e.langProvider.LangDirection),s.yb(1),s.rc(e.title),s.yb(4),s.nc("direction",e.langProvider.LangDirection),s.yb(11),s.rc(e.langProvider.CreateCandidateFirsrNumber),s.yb(1),s.dc("ngModel",e.candidateFirstNumber),s.yb(4),s.rc(e.langProvider.CreateCandidateLastNumber),s.yb(1),s.dc("ngModel",e.candidateLastNumber),s.yb(4),s.rc(e.langProvider.CreateCandidateGroup),s.yb(1),s.dc("ngModel",e.candidateGroup),s.yb(1),s.dc("ngIf",e.isNewGroup),s.yb(2),s.dc("color",e.actionColor)("disabled",t.invalid),s.yb(1),s.sc(" ",e.action," ")}},directives:[o.B,o.zb,o.xb,o.l,o.k,o.C,a.x,a.k,a.l,o.A,o.gb,o.t,o.H,o.N,o.G,o.Hb,a.t,a.j,a.m,n.t],styles:[".container[_ngcontent-%COMP%]{height:100%;margin-top:20%}"]}),t})();var g=i("3LWr"),p=i("NrBX"),h=i("zrcv"),v=i("VYsW"),m=i("ufmx"),f=i("5+WD"),C=i("g1yl");function y(t,e){if(1&t){const t=s.Ob();s.Nb(0,"ion-item-option",27),s.Vb("click",(function(){s.ic(t);const e=s.Xb().$implicit;return s.Xb().changeActiveStatus(e,!0)})),s.Nb(1,"span"),s.qc(2),s.Mb(),s.Mb()}if(2&t){const t=s.Xb(2);s.yb(2),s.rc(t.langProvider.CandidateActive)}}function M(t,e){if(1&t){const t=s.Ob();s.Nb(0,"ion-item-option",16),s.Vb("click",(function(){s.ic(t);const e=s.Xb().$implicit;return s.Xb().changeActiveStatus(e,!1)})),s.Nb(1,"span"),s.qc(2),s.Mb(),s.Mb()}if(2&t){const t=s.Xb(2);s.yb(2),s.rc(t.langProvider.CandidateNotActive)}}function N(t,e){if(1&t&&(s.Nb(0,"span",28),s.qc(1),s.Mb()),2&t){const t=s.Xb().$implicit;s.yb(1),s.sc(" ",t.name," ")}}function w(t,e){if(1&t&&(s.Nb(0,"span"),s.qc(1),s.Mb()),2&t){const t=s.Xb(2).$implicit,e=s.Xb();s.yb(1),s.tc(" ",e.langProvider.GroupShort," ",t.group," ")}}function P(t,e){if(1&t&&(s.Nb(0,"div",29),s.oc(1,w,2,2,"span",30),s.Nb(2,"span"),s.qc(3),s.Mb(),s.Mb()),2&t){const t=s.Xb().$implicit,e=s.Xb();s.yb(1),s.dc("ngIf",e.isMultipleGroupsAllowed),s.yb(2),s.tc(" ",e.langProvider.Candidate," ",t.number," ")}}function S(t,e){if(1&t){const t=s.Ob();s.Nb(0,"ion-item-sliding"),s.Nb(1,"ion-item-options",18),s.oc(2,y,3,1,"ion-item-option",19),s.oc(3,M,3,1,"ng-template",null,20,s.pc),s.Mb(),s.Nb(5,"ion-item",21),s.Vb("click",(function(){s.ic(t);const i=e.$implicit;return s.Xb().onCadidateSelected(i)})),s.Jb(6,"app-candidate-avatar",22),s.Nb(7,"ion-label"),s.Nb(8,"div",23),s.oc(9,N,2,1,"span",24),s.oc(10,P,4,3,"ng-template",null,25,s.pc),s.Jb(12,"ion-progress-bar",26),s.Mb(),s.Mb(),s.Jb(13,"ion-reorder",1),s.Mb(),s.Mb()}if(2&t){const t=e.$implicit,i=s.hc(4),n=s.hc(11),a=s.Xb();s.yb(2),s.dc("ngIf",!1===t.isActive)("ngIfElse",i),s.yb(3),s.dc("hidden",a.checkVisibiltyStatus(t)),s.yb(1),s.dc("candidate",t),s.yb(2),s.Ab("candidateNotActive",!1===t.isActive),s.yb(1),s.dc("ngIf",t.name)("ngIfElse",n),s.yb(3),s.dc("color",t.coveragePctColor)("value",t.coveragePct)}}const k=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a,o,r,d){this.router=t,this.store=e,this.taskDelegator=i,this.msgService=n,this.appContext=a,this.modalCtrl=o,this.candidatesDelegator=r,this.langProvider=d,this.filterStatus="active",this.isInit=!1}ngOnInit(){return Object(d.a)(this,void 0,void 0,(function*(){this.isMultipleGroupsAllowed=(yield this.taskDelegator.getCategoryConfig()).isMultipleGroupsAllowed,this.store.candidates.subscribe(t=>{if(this.candidates=t,null!=t)if(t.length>0){this.candidates=null==t?void 0:t.sort((t,e)=>{var i,n;return(null!==(i=t.listOrder)&&void 0!==i?i:t.number)-(null!==(n=e.listOrder)&&void 0!==n?n:e.number)});for(const t of this.candidates)t.coveragePct=100,t.coveragePctColor="secondary"}else this.store.categoryConfig.value.isCreateCandidatesIfEmpty&&this.showCreateCandidates()})}))}onCadidateSelected(t){this.router.navigate(["tabs/candidates/candidate-details/dummy",{candidateId:t._id}],{skipLocationChange:!0})}doReorder(t){return Object(d.a)(this,void 0,void 0,(function*(){console.log("Dragged from index",t.detail.from,"to",t.detail.to),this.candidates=t.detail.complete(this.candidates),this.reorderCandidates(),yield this.candidatesDelegator.updateCandidates(this.candidates)}))}reorderCandidates(){for(const[t,e]of this.candidates.entries())e.listOrder=t}trackByFn(t,e){return e?e._id:t}showCandidatesFilters(){return Object(d.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:l,swipeToClose:!0,componentProps:{status:this.filterStatus}});yield t.present();const e=yield t.onWillDismiss();this.applyCandidatesFilters(e.data)}))}applyCandidatesFilters(t){this.filterStatus=t}checkVisibiltyStatus(t){var e;let i=!0;return"active"===this.filterStatus?i=null===(e=t.isActive)||void 0===e||e:"notActive"===this.filterStatus&&(i=!1===t.isActive),!i}changeActiveStatus(t,e){return Object(d.a)(this,void 0,void 0,(function*(){t.isActive=e,t.statusChangeDate=new Date,yield this.candidatesDelegator.updateCandidates([t]),e?yield this.msgService.showToast(this.langProvider.CandidateStatusChangedActive(t),500,"toastSuccess"):yield this.msgService.showToast(this.langProvider.CandidateStatusChangedNotActive(t),500,"toastWarn"),this.candidatesList.closeSlidingItems()}))}showCreateCandidates(){var t,e,i,n,a;return Object(d.a)(this,void 0,void 0,(function*(){const o=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.CreateCandidateTitle,action:this.langProvider.Activate,actionColor:"primary"}});yield o.present();const r=yield o.onWillDismiss();if((null===(e=null===(t=r.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&(null===(i=r.data)||void 0===i?void 0:i.group)){const t=null===(n=this.candidates)||void 0===n?void 0:n.some(t=>r.data.numbers.find(e=>e===t.number&&r.data.group.toString()===t.group)),e=null===(a=this.candidates)||void 0===a?void 0:a.reduce((t,e)=>(t.add(e.group),t),new Set),i=yield this.taskDelegator.getCategoryConfig();t?this.msgService.showToast(this.langProvider.CreateCandidateDuplicateNumber,2e3,"toastWarn"):!i.isMultipleGroupsAllowed&&(null==e?void 0:e.size)>0&&!e.has(r.data.group.toString())?this.msgService.showToast(this.langProvider.CreateCandidateMultipleGroupsMain,2e3,"toastWarn"):(yield this.candidatesDelegator.createNewCandidates(r.data),this.msgService.showToast(this.langProvider.CandidatesCreatedSuccessfully(r.data.numbers.length),2e3,"toastSuccess"))}}))}showEditCandidatesGroup(){var t,e,i,n,a;return Object(d.a)(this,void 0,void 0,(function*(){const o=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.ChangeCandidateGroupTitle,action:this.langProvider.Activate,actionColor:"primary",isNewGroup:!0}});yield o.present();const r=yield o.onWillDismiss();if((null===(e=null===(t=r.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&(null===(i=r.data)||void 0===i?void 0:i.group)&&(null===(n=r.data)||void 0===n?void 0:n.newGroup)){const t=r.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===r.data.group.toString())),e=null===(a=this.candidates)||void 0===a?void 0:a.filter(t=>!r.data.numbers.find(e=>{var i;return t.number===e&&t.group===(null===(i=r.data.newGroup)||void 0===i?void 0:i.toString())})).reduce((t,e)=>(t.add(e.group),t),new Set),i=yield this.taskDelegator.getCategoryConfig();t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.ChangeGroupCandidateNotExistNumber,2e3,"toastWarn"):!i.isMultipleGroupsAllowed&&(null==e?void 0:e.size)>0&&!e.has(r.data.newGroup.toString())?this.msgService.showToast(this.langProvider.CreateCandidateMultipleGroupsMain,2e3,"toastWarn"):(t.forEach(t=>t.group=r.data.newGroup.toString()),yield this.candidatesDelegator.updateCandidates(t),this.msgService.showToast(this.langProvider.CandidatesChangedSuccessfully(r.data.numbers.length),2e3,"toastSuccess"))}}))}showDeleteCandidates(){var t,e;return Object(d.a)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.DeleteCandidateTitle,action:this.langProvider.Activate,actionColor:"danger"}});yield i.present();const n=yield i.onWillDismiss();if((null===(e=null===(t=n.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0){const t=n.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===n.data.group.toString()));t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.DeleteCandidateNotExistNumber,2e3,"toastWarn"):(yield this.candidatesDelegator.deleteCandidates(t),this.msgService.showToast(this.langProvider.CandidatesDeletedSuccessfully(n.data.numbers.length),2e3,"toastSuccess"))}}))}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(r.f),s.Ib(g.a),s.Ib(p.a),s.Ib(h.a),s.Ib(v.a),s.Ib(o.Eb),s.Ib(m.a),s.Ib(c.b))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-candidtes"]],viewQuery:function(t,e){var i;1&t&&s.wc(o.O,!0),2&t&&s.gc(i=s.Wb())&&(e.candidatesList=i.first)},inputs:{candidates:"candidates"},decls:25,vars:6,consts:[["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","options"],[1,"candidatesContainer",3,"fullscreen"],["disabled","false",3,"ionItemReorder"],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","vertical","bottom","slot","fixed","cdkDrag","","cdkDragBoundary",".candidatesContainer"],["color","dark",2,"opacity","0.6"],["md","caret-up","ios","chevron-up-circle-outline"],["side","top"],["color","secondary",3,"click"],["name","build"],["color","primary",3,"click"],["name","people"],["side","start"],["color","danger",3,"click"],["name","trash"],["side","end"],["color","success",3,"click",4,"ngIf","ngIfElse"],["notActive",""],["button","",3,"hidden","click"],["slot","start",1,"candi",3,"candidate"],[1,"candidateLabel"],["class","candidateName",4,"ngIf","ngIfElse"],["noName",""],[1,"candidateProgress",3,"color","value"],["color","success",3,"click"],[1,"candidateName"],[1,"candidateNameGroup"],[4,"ngIf"]],template:function(t,e){1&t&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-buttons",0),s.Jb(3,"ion-menu-button"),s.Mb(),s.Nb(4,"ion-title"),s.qc(5),s.Mb(),s.Nb(6,"ion-buttons",1),s.Nb(7,"ion-button",2),s.Vb("click",(function(){return e.showCandidatesFilters()})),s.Jb(8,"ion-icon",3),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(9,"ion-content",4),s.Nb(10,"ion-list"),s.Nb(11,"ion-reorder-group",5),s.Vb("ionItemReorder",(function(t){return e.doReorder(t)})),s.oc(12,S,14,10,"ion-item-sliding",6),s.Mb(),s.Mb(),s.Nb(13,"ion-fab",7),s.Nb(14,"ion-fab-button",8),s.Jb(15,"ion-icon",9),s.Mb(),s.Nb(16,"ion-fab-list",10),s.Nb(17,"ion-fab-button",11),s.Vb("click",(function(){return e.showEditCandidatesGroup()})),s.Jb(18,"ion-icon",12),s.Mb(),s.Nb(19,"ion-fab-button",13),s.Vb("click",(function(){return e.showCreateCandidates()})),s.Jb(20,"ion-icon",14),s.Mb(),s.Mb(),s.Nb(21,"ion-fab-list",15),s.Nb(22,"ion-fab-button",16),s.Vb("click",(function(){return e.showDeleteCandidates()})),s.Jb(23,"ion-icon",14),s.Jb(24,"ion-icon",17),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.yb(4),s.nc("direction",e.langProvider.LangDirection),s.yb(1),s.rc(e.langProvider.Candidates),s.yb(4),s.dc("fullscreen",!0),s.yb(3),s.dc("ngForOf",e.candidates)("ngForTrackBy",e.trackByFn))},directives:[o.B,o.zb,o.l,o.R,o.xb,o.k,o.C,o.u,o.O,o.db,n.s,o.w,f.a,o.x,o.y,o.M,o.L,n.t,o.H,C.a,o.N,o.W,o.cb,o.K],styles:[".circle[_ngcontent-%COMP%]{justify-content:center;align-items:center;border-radius:50px;min-height:40px;min-width:40px;text-align:center;display:flex;margin-top:.2rem;margin-bottom:.2rem}.candi[_ngcontent-%COMP%]{height:var(--avatar-height);width:var(--avatar-width);margin:var(--avatar-margin)}.avatar[_ngcontent-%COMP%]{display:grid;align-items:center;text-align:center}.avatarItem[_ngcontent-%COMP%]{grid-row:1;grid-column:1}.avatarTxtItem[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#000;opacity:.4}.img[_ngcontent-%COMP%]{background:none}.noImg[_ngcontent-%COMP%]{background:#d3d3d3}.candidateLabel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.candidateName[_ngcontent-%COMP%]{margin-left:1rem;width:70%}.candidateName[_ngcontent-%COMP%], .candidateNameGroup[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:normal}.candidateNameGroup[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:75%}.candidateNotActive[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.candidateProgress[_ngcontent-%COMP%]{width:25%}"]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(k)],r.j]}),t})();var G=i("ajeZ");let I=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[n.c,a.e,o.Bb,O,f.f,G.a]]}),t})()}}]);