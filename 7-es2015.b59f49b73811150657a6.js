(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PWTB:function(t,e,n){"use strict";var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();t.exports=e=o.fetch,o.fetch&&(e.default=o.fetch.bind(o)),e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response},TaIo:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n("PWTB"))&&o.__esModule?o:{default:o};e.default=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{e=window.fetch}catch(i){e=r.default}try{var o="https://spreadsheets.google.com/feeds/cells/".concat(t,"/").concat(n,"/public/values?alt=json-in-script");return e(o).then((function(t){if(!t.ok)throw console.log("there is an error in the gsheets response"),new Error("Error fetching GSheet");return t.text()})).then((function(t){var e=t.replace("gdata.io.handleScriptLoaded(","").slice(0,-2);return JSON.parse(e)})).catch((function(t){throw new Error("Failed to fetch from GSheets API. Check your Sheet Id and the public availability of your GSheet.")}))}catch(i){throw new Error("General error when fetching GSheet: ".concat(i))}}},Z6ku:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n("TaIo"))&&o.__esModule?o:{default:o};function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}e.default=function(t,e,n){return(0,r.default)(t.sheetId,t.sheetNumber?t.sheetNumber:1).then((function(n){var o=function(t,e,n,o){var r,c=[{}],a={},s=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,void 0):void 0}}(t))){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw c}}}}(t.feed.entry);try{for(s.s();!(r=s.n()).done;){var u=r.value.gs$cell,l=u.$t,d=u.col,f=u.row,h=a[d];f<2?a[d]=l.toLowerCase():(void 0===c[f]&&(c[f]={}),void 0!==h&&h.length>0&&(c[f][h]=l))}}catch(b){s.e(b)}finally{s.f()}return c=c.filter((function(t){return Object.keys(t).length})),e||!n?c:function(t,e,n){return t.filter((function(t){var o=null,r=[];return!(void 0===t||t.length<=0||Object.keys(t).length<=0)&&(Object.keys(e).forEach((function(o){r.push(function(t,e,n){try{if(void 0!==t){if(t=t.toLowerCase().trim(),e=e.toLowerCase().trim(),"strict"===n)return t===e;if("loose"===n)return t.includes(e)||t==e}}catch(o){return console.log("error in matchValues: ".concat(o.message)),!1}return!1}(t[o],e[o],n.matching||"loose"))})),"or"===n.operator&&(o=r.some((function(t){return!0===t}))),"and"===n.operator&&(o=r.every((function(t){return!0===t}))),o)}))}(c,n,o)}(n,t.returnAllResults||!1,t.filter||!1,t.filterOptions||{operator:"or",matching:"loose"});e(o)})).catch((function(t){return n(t.message)}))}},sMI2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=(o=n("Z6ku"))&&o.__esModule?o:{default:o},i=function(t,e,n){return(0,r.default)(t,(function(t){e(t)}),(function(t){if(!n)throw new Error("g-sheets-api error: ".concat(t));n(t)}))};t.exports=i,e.default=i},x5Jj:function(t,e,n){"use strict";n.r(e),n.d(e,"PouchbPlayPageModule",(function(){return m}));var o=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),c=n("tyNb"),a=n("mrSG"),s=n("fXoL"),u=n("h7jJ"),l=n("4UqN"),d=n("sMI2"),f=n("6nr9");let h=(()=>{class t{constructor(t){this.settingsService=t}validate(){return Object(a.a)(this,void 0,void 0,(function*(){return yield this.getValidationData()}))}getValidationData(){return new Promise((t,e)=>{const n=new RegExp("https://docs.google.com/spreadsheets/d/(.*)/"),o=this.settingsService.getSettingsItem("validationSheetUri"),r={sheetId:n.exec(o)[1],returnAllResults:!0};try{d(r,e=>{t(JSON.stringify(e,null,2))})}catch(i){e(i)}})}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(f.a))},t.\u0275prov=s.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=n("nbnm"),v=n("zrcv");const p=["video"],y=[{path:"",component:(()=>{class t{constructor(t,e,n,o,r,i){this.dataProvider=t,this.setupService=e,this.validationService=n,this.settingsService=o,this.entityNamer=r,this.msgService=i}ngOnInit(){}sync(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.dataProvider.syncToCouch(),yield this.msgService.showToast("DB Synced",500)}))}dropDb(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.setupService.clearSetup(),yield this.dataProvider.dropDb(),location.reload(),yield this.msgService.showToast("DB Dropped",500)}))}compactDb(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.dataProvider.compactDb(),yield this.msgService.showToast("DB Compacted",500)}))}getAllTasks(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.dataProvider.getAllTasks();this.msgService.showModal(JSON.stringify(t))}))}googleSheet(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.validationService.validate();this.msgService.showModal(t,null,"ltr")}))}playVideo(){this.videoSrc="./assets/videos/VID-20200320-WA0027.mp4",this.videoPlayer.nativeElement.load(),this.videoPlayer.nativeElement.play()}sendMail(){return Object(a.a)(this,void 0,void 0,(function*(){const t=encodeURI(this.entityNamer.userPrefix()),e=this.settingsService.getSettingsItem("targetDataMail"),n=yield this.dataProvider.getAllDocs(),o=JSON.stringify(n);window.location.href=`mailto:${e}?subject=${t}&body=${o}`}))}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(u.a),s.Ib(l.a),s.Ib(h),s.Ib(f.a),s.Ib(b.a),s.Ib(v.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-pouchb-play"]],viewQuery:function(t,e){var n;1&t&&s.vc(p,!0),2&t&&s.gc(n=s.Wb())&&(e.videoPlayer=n.first)},decls:21,vars:0,consts:[["slot","end"],["defaultHref","/"],["expand","full","color","secondary",3,"click"]],template:function(t,e){1&t&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-buttons",0),s.Jb(3,"ion-back-button",1),s.Mb(),s.Nb(4,"ion-title"),s.pc(5,"pouchbPlay"),s.Mb(),s.Mb(),s.Mb(),s.Nb(6,"ion-content"),s.Nb(7,"ion-button",2),s.Vb("click",(function(){return e.dropDb()})),s.pc(8,"Drop DB"),s.Mb(),s.Nb(9,"ion-button",2),s.Vb("click",(function(){return e.sync()})),s.pc(10,"Sync"),s.Mb(),s.Nb(11,"ion-button",2),s.Vb("click",(function(){return e.compactDb()})),s.pc(12,"Compact DB"),s.Mb(),s.Nb(13,"ion-button",2),s.Vb("click",(function(){return e.getAllTasks()})),s.pc(14,"Get All Tasks"),s.Mb(),s.Nb(15,"ion-button",2),s.Vb("click",(function(){return e.googleSheet()})),s.pc(16,"Google Sheet"),s.Mb(),s.Nb(17,"ion-button",2),s.Vb("click",(function(){return e.playVideo()})),s.pc(18,"Video"),s.Mb(),s.Nb(19,"ion-button",2),s.Vb("click",(function(){return e.sendMail()})),s.pc(20,"Mail"),s.Mb(),s.Mb())},directives:[i.s,i.Z,i.k,i.g,i.h,i.X,i.n,i.j],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}.video[_ngcontent-%COMP%]{height:auto;width:100%}"]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[c.h.forChild(y)],c.h]}),t})(),m=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[o.c,r.a,i.bb,g]]}),t})()}}]);