(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5Ma4":function(t,e,i){"use strict";i.r(e),i.d(e,"CandidtesPageModule",(function(){return D}));var n=i("ofXK"),a=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),s=i("mrSG"),d=i("fXoL"),c=i("L5fO");let l=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}applyFilters(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Ib(o.eb),d.Ib(c.b))},t.\u0275cmp=d.Cb({type:t,selectors:[["app-candidates-filter"]],inputs:{status:"status"},decls:20,vars:9,consts:[["translucent","true"],[3,"value"],["button","",3,"click"],["slot","start","value","active"],["slot","start","value","notActive"],["slot","start","value","all"]],template:function(t,e){1&t&&(d.Nb(0,"ion-header",0),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-title"),d.Nb(3,"span"),d.pc(4),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(5,"ion-content"),d.Nb(6,"ion-list"),d.Nb(7,"ion-radio-group",1),d.Nb(8,"ion-item",2),d.Vb("click",(function(){return e.applyFilters("active")})),d.Nb(9,"ion-label"),d.pc(10),d.Mb(),d.Jb(11,"ion-radio",3),d.Mb(),d.Nb(12,"ion-item",2),d.Vb("click",(function(){return e.applyFilters("notActive")})),d.Nb(13,"ion-label"),d.pc(14),d.Mb(),d.Jb(15,"ion-radio",4),d.Mb(),d.Nb(16,"ion-item",2),d.Vb("click",(function(){return e.applyFilters("all")})),d.Nb(17,"ion-label"),d.pc(18),d.Mb(),d.Jb(19,"ion-radio",5),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t&&(d.yb(2),d.mc("direction",e.langProvider.LangDirection),d.yb(2),d.qc(e.langProvider.Select),d.yb(2),d.mc("direction",e.langProvider.LangDirection),d.yb(1),d.dc("value",e.status),d.yb(3),d.qc(e.langProvider.CandidatesFilterActive),d.yb(4),d.qc(e.langProvider.CandidatesFilterNotActive),d.yb(4),d.qc(e.langProvider.CandidatesFilterAll))},directives:[o.s,o.Z,o.X,o.n,o.D,o.I,o.kb,o.w,o.C,o.H,o.jb],styles:[""]}),t})();function b(t,e){if(1&t){const t=d.Ob();d.Nb(0,"ion-item"),d.Nb(1,"ion-label",10),d.Nb(2,"span"),d.pc(3),d.Mb(),d.Mb(),d.Nb(4,"ion-input",16),d.Vb("ngModelChange",(function(e){return d.ic(t),d.Xb().candidateNewGroup=e})),d.Mb(),d.Mb()}if(2&t){const t=d.Xb();d.yb(3),d.qc(t.langProvider.CreateCandidateNewGroup),d.yb(1),d.dc("ngModel",t.candidateNewGroup)}}let u=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}back(){this.modalCtrl.dismiss()}activate(){return Object(s.a)(this,void 0,void 0,(function*(){const t=[];if(this.candidateLastNumber>0)for(let e=this.candidateFirstNumber;e<=this.candidateLastNumber;e++)t.push(e);else t.push(this.candidateFirstNumber);this.modalCtrl.dismiss({numbers:t,group:this.candidateGroup,newGroup:this.candidateNewGroup})}))}}return t.\u0275fac=function(e){return new(e||t)(d.Ib(o.eb),d.Ib(c.b))},t.\u0275cmp=d.Cb({type:t,selectors:[["app-create-candidates"]],inputs:{title:"title",action:"action",actionColor:"actionColor",isNewGroup:"isNewGroup"},decls:34,vars:15,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"container"],[3,"ngSubmit"],["form","ngForm"],["justify-content-center",""],["align-self-center","","size-md","6","size-lg","5","size-xs","12"],["text-center",""],["padding",""],["position","floating"],["name","candidateNumber","type","number","autofocus","true","required","",3,"placeholder","ngModel","ngModelChange"],["name","totalCandidates","type","number",3,"placeholder","ngModel","ngModelChange"],["name","candidateGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["size","large","type","submit","expand","block",3,"color","disabled"],["name","candidateNewGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-title"),d.pc(3),d.Mb(),d.Nb(4,"ion-buttons",0),d.Nb(5,"ion-button",1),d.Vb("click",(function(){return e.back()})),d.Jb(6,"ion-icon",2),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(7,"div",3),d.Nb(8,"form",4,5),d.Vb("ngSubmit",(function(){return e.activate()})),d.Nb(10,"ion-grid"),d.Nb(11,"ion-row",6),d.Nb(12,"ion-col",7),d.Jb(13,"div",8),d.Nb(14,"div",9),d.Nb(15,"ion-item"),d.Nb(16,"ion-label",10),d.Nb(17,"span"),d.pc(18),d.Mb(),d.Mb(),d.Nb(19,"ion-input",11),d.Vb("ngModelChange",(function(t){return e.candidateFirstNumber=t})),d.Mb(),d.Mb(),d.Nb(20,"ion-item"),d.Nb(21,"ion-label",10),d.Nb(22,"span"),d.pc(23),d.Mb(),d.Mb(),d.Nb(24,"ion-input",12),d.Vb("ngModelChange",(function(t){return e.candidateLastNumber=t})),d.Mb(),d.Mb(),d.Nb(25,"ion-item"),d.Nb(26,"ion-label",10),d.Nb(27,"span"),d.pc(28),d.Mb(),d.Mb(),d.Nb(29,"ion-input",13),d.Vb("ngModelChange",(function(t){return e.candidateGroup=t})),d.Mb(),d.Mb(),d.nc(30,b,5,2,"ion-item",14),d.Mb(),d.Nb(31,"div",9),d.Nb(32,"ion-button",15),d.pc(33),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t){const t=d.hc(9);d.yb(2),d.mc("direction",e.langProvider.LangDirection),d.yb(1),d.qc(e.title),d.yb(4),d.mc("direction",e.langProvider.LangDirection),d.yb(11),d.qc(e.langProvider.CreateCandidateFirsrNumber),d.yb(1),d.dc("ngModel",e.candidateFirstNumber),d.yb(4),d.qc(e.langProvider.CreateCandidateLastNumber),d.yb(1),d.dc("ngModel",e.candidateLastNumber),d.yb(4),d.qc(e.langProvider.CreateCandidateGroup),d.yb(1),d.dc("ngModel",e.candidateGroup),d.yb(1),d.dc("ngIf",e.isNewGroup),d.yb(2),d.dc("color",e.actionColor)("disabled",t.invalid),d.yb(1),d.rc(" ",e.action," ")}},directives:[o.s,o.Z,o.X,o.k,o.j,o.t,a.i,a.e,a.f,o.r,o.M,o.m,o.w,o.C,o.v,o.gb,a.h,a.d,a.g,n.m],styles:[".container[_ngcontent-%COMP%]{height:100%;margin-top:20%}"]}),t})();var g=i("3LWr"),p=i("NrBX"),h=i("zrcv"),m=i("VYsW"),v=i("ufmx"),f=i("5+WD"),C=i("g1yl");function y(t,e){if(1&t){const t=d.Ob();d.Nb(0,"ion-item-option",27),d.Vb("click",(function(){d.ic(t);const e=d.Xb().$implicit;return d.Xb().changeActiveStatus(e,!0)})),d.Nb(1,"span"),d.pc(2),d.Mb(),d.Mb()}if(2&t){const t=d.Xb(2);d.yb(2),d.qc(t.langProvider.CandidateActive)}}function M(t,e){if(1&t){const t=d.Ob();d.Nb(0,"ion-item-option",16),d.Vb("click",(function(){d.ic(t);const e=d.Xb().$implicit;return d.Xb().changeActiveStatus(e,!1)})),d.Nb(1,"span"),d.pc(2),d.Mb(),d.Mb()}if(2&t){const t=d.Xb(2);d.yb(2),d.qc(t.langProvider.CandidateNotActive)}}function N(t,e){if(1&t&&(d.Nb(0,"span",28),d.pc(1),d.Mb()),2&t){const t=d.Xb().$implicit;d.yb(1),d.rc(" ",t.name," ")}}function w(t,e){if(1&t&&(d.Nb(0,"span",28),d.pc(1),d.Mb()),2&t){const t=d.Xb().$implicit,e=d.Xb();d.yb(1),d.sc(" ",e.langProvider.Candidate," ",t.number," ")}}function P(t,e){if(1&t){const t=d.Ob();d.Nb(0,"ion-item-sliding"),d.Nb(1,"ion-item-options",18),d.nc(2,y,3,1,"ion-item-option",19),d.nc(3,M,3,1,"ng-template",null,20,d.oc),d.Mb(),d.Nb(5,"ion-item",21),d.Vb("click",(function(){d.ic(t);const i=e.$implicit;return d.Xb().onCadidateSelected(i)})),d.Jb(6,"app-candidate-avatar",22),d.Nb(7,"ion-label"),d.Nb(8,"div",23),d.nc(9,N,2,1,"span",24),d.nc(10,w,2,2,"ng-template",null,25,d.oc),d.Jb(12,"ion-progress-bar",26),d.Mb(),d.Mb(),d.Jb(13,"ion-reorder",1),d.Mb(),d.Mb()}if(2&t){const t=e.$implicit,i=d.hc(4),n=d.hc(11),a=d.Xb();d.yb(2),d.dc("ngIf",!1===t.isActive)("ngIfElse",i),d.yb(3),d.dc("hidden",a.checkVisibiltyStatus(t)),d.yb(1),d.dc("candidate",t),d.yb(2),d.Ab("candidateNotActive",!1===t.isActive),d.yb(1),d.dc("ngIf",t.name)("ngIfElse",n),d.yb(3),d.dc("color",t.coveragePctColor)("value",t.coveragePct)}}const S=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a,o,r,s){this.router=t,this.store=e,this.taskDelegator=i,this.msgService=n,this.appContext=a,this.modalCtrl=o,this.candidatesDelegator=r,this.langProvider=s,this.filterStatus="active",this.isInit=!1}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){this.store.candidates.subscribe(t=>{if(null!=t)if(t.length>0){this.candidates=null==t?void 0:t.sort((t,e)=>{var i,n;return(null!==(i=t.listOrder)&&void 0!==i?i:t.number)-(null!==(n=e.listOrder)&&void 0!==n?n:e.number)});for(const t of this.candidates)t.coveragePct=100,t.coveragePctColor="secondary"}else this.store.categoryConfig.value.isCreateCandidatesIfEmpty&&this.showCreateCandidates()})}))}onCadidateSelected(t){this.router.navigate(["tabs/candidates/candidate-details/dummy",{candidateId:t._id}],{skipLocationChange:!0})}doReorder(t){return Object(s.a)(this,void 0,void 0,(function*(){console.log("Dragged from index",t.detail.from,"to",t.detail.to),this.candidates=t.detail.complete(this.candidates),this.reorderCandidates(),yield this.candidatesDelegator.updateCandidates(this.candidates)}))}reorderCandidates(){for(const[t,e]of this.candidates.entries())e.listOrder=t}trackByFn(t,e){return e?e._id:t}showCandidatesFilters(){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:l,swipeToClose:!0,componentProps:{status:this.filterStatus}});yield t.present();const e=yield t.onWillDismiss();this.applyCandidatesFilters(e.data)}))}applyCandidatesFilters(t){this.filterStatus=t}checkVisibiltyStatus(t){var e;let i=!0;return"active"===this.filterStatus?i=null===(e=t.isActive)||void 0===e||e:"notActive"===this.filterStatus&&(i=!1===t.isActive),!i}changeActiveStatus(t,e){return Object(s.a)(this,void 0,void 0,(function*(){t.isActive=e,t.statusChangeDate=new Date,yield this.candidatesDelegator.updateCandidates([t]),e?yield this.msgService.showToast(this.langProvider.CandidateStatusChangedActive(t),500,"toastSuccess"):yield this.msgService.showToast(this.langProvider.CandidateStatusChangedNotActive(t),500,"toastWarn"),this.candidatesList.closeSlidingItems()}))}showCreateCandidates(){var t,e,i,n,a;return Object(s.a)(this,void 0,void 0,(function*(){const o=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.CreateCandidateTitle,action:this.langProvider.Activate,actionColor:"primary"}});yield o.present();const r=yield o.onWillDismiss();if((null===(e=null===(t=r.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&(null===(i=r.data)||void 0===i?void 0:i.group)){const t=null===(n=this.candidates)||void 0===n?void 0:n.some(t=>r.data.numbers.find(e=>e===t.number&&r.data.group.toString()===t.group)),e=null===(a=this.candidates)||void 0===a?void 0:a.reduce((t,e)=>(t.add(e.group),t),new Set),i=yield this.taskDelegator.getCategoryConfig();t?this.msgService.showToast(this.langProvider.CreateCandidateDuplicateNumber,2e3,"toastWarn"):i.isMultipleGroupsAllowed||!e||e.has(r.data.group.toString())?(yield this.candidatesDelegator.createNewCandidates(r.data),this.msgService.showToast(this.langProvider.CandidatesCreatedSuccessfully(r.data.numbers.length),2e3,"toastSuccess")):this.msgService.showToast(this.langProvider.CreateCandidateMultipleGroupsMain,2e3,"toastWarn")}}))}showEditCandidatesGroup(){var t,e,i,n,a;return Object(s.a)(this,void 0,void 0,(function*(){const o=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.ChangeCandidateGroupTitle,action:this.langProvider.Activate,actionColor:"primary",isNewGroup:!0}});yield o.present();const r=yield o.onWillDismiss();if((null===(e=null===(t=r.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&(null===(i=r.data)||void 0===i?void 0:i.group)&&(null===(n=r.data)||void 0===n?void 0:n.newGroup)){const t=r.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===r.data.group.toString())),e=null===(a=this.candidates)||void 0===a?void 0:a.filter(t=>!r.data.numbers.find(e=>e===t.number)).reduce((t,e)=>(t.add(e.group),t),new Set),i=yield this.taskDelegator.getCategoryConfig();t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.ChangeGroupCandidateNotExistNumber,2e3,"toastWarn"):!i.isMultipleGroupsAllowed&&(null==e?void 0:e.size)>0&&!e.has(r.data.newGroup.toString())?this.msgService.showToast(this.langProvider.CreateCandidateMultipleGroupsMain,2e3,"toastWarn"):(t.forEach(t=>t.group=r.data.newGroup.toString()),yield this.candidatesDelegator.updateCandidates(t),this.msgService.showToast(this.langProvider.CandidatesChangedSuccessfully(r.data.numbers.length),2e3,"toastSuccess"))}}))}showDeleteCandidates(){var t,e;return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.DeleteCandidateTitle,action:this.langProvider.Activate,actionColor:"danger"}});yield i.present();const n=yield i.onWillDismiss();if((null===(e=null===(t=n.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0){const t=n.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===n.data.group.toString()));t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.DeleteCandidateNotExistNumber,2e3,"toastWarn"):(yield this.candidatesDelegator.deleteCandidates(t),this.msgService.showToast(this.langProvider.CandidatesDeletedSuccessfully(n.data.numbers.length),2e3,"toastSuccess"))}}))}}return t.\u0275fac=function(e){return new(e||t)(d.Ib(r.f),d.Ib(g.a),d.Ib(p.a),d.Ib(h.a),d.Ib(m.a),d.Ib(o.eb),d.Ib(v.a),d.Ib(c.b))},t.\u0275cmp=d.Cb({type:t,selectors:[["app-candidtes"]],viewQuery:function(t,e){var i;1&t&&d.vc(o.D,!0),2&t&&d.gc(i=d.Wb())&&(e.candidatesList=i.first)},inputs:{candidates:"candidates"},decls:25,vars:6,consts:[["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","options"],[1,"candidatesContainer",3,"fullscreen"],["disabled","false",3,"ionItemReorder"],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","vertical","bottom","slot","fixed","cdkDrag","","cdkDragBoundary",".candidatesContainer"],["color","dark",2,"opacity","0.6"],["md","caret-up","ios","chevron-up-circle-outline"],["side","top"],["color","secondary",3,"click"],["name","build"],["color","primary",3,"click"],["name","people"],["side","start"],["color","danger",3,"click"],["name","trash"],["side","end"],["color","success",3,"click",4,"ngIf","ngIfElse"],["notActive",""],["button","",3,"hidden","click"],["slot","start",1,"candi",3,"candidate"],[1,"candidateLabel"],["class","candidateName",4,"ngIf","ngIfElse"],["noName",""],[1,"candidateProgress",3,"color","value"],["color","success",3,"click"],[1,"candidateName"]],template:function(t,e){1&t&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Jb(3,"ion-menu-button"),d.Mb(),d.Nb(4,"ion-title"),d.pc(5),d.Mb(),d.Nb(6,"ion-buttons",1),d.Nb(7,"ion-button",2),d.Vb("click",(function(){return e.showCandidatesFilters()})),d.Jb(8,"ion-icon",3),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(9,"ion-content",4),d.Nb(10,"ion-list"),d.Nb(11,"ion-reorder-group",5),d.Vb("ionItemReorder",(function(t){return e.doReorder(t)})),d.nc(12,P,14,10,"ion-item-sliding",6),d.Mb(),d.Mb(),d.Nb(13,"ion-fab",7),d.Nb(14,"ion-fab-button",8),d.Jb(15,"ion-icon",9),d.Mb(),d.Nb(16,"ion-fab-list",10),d.Nb(17,"ion-fab-button",11),d.Vb("click",(function(){return e.showEditCandidatesGroup()})),d.Jb(18,"ion-icon",12),d.Mb(),d.Nb(19,"ion-fab-button",13),d.Vb("click",(function(){return e.showCreateCandidates()})),d.Jb(20,"ion-icon",14),d.Mb(),d.Mb(),d.Nb(21,"ion-fab-list",15),d.Nb(22,"ion-fab-button",16),d.Vb("click",(function(){return e.showDeleteCandidates()})),d.Jb(23,"ion-icon",14),d.Jb(24,"ion-icon",17),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t&&(d.yb(4),d.mc("direction",e.langProvider.LangDirection),d.yb(1),d.qc(e.langProvider.Candidates),d.yb(4),d.dc("fullscreen",!0),d.yb(3),d.dc("ngForOf",e.candidates)("ngForTrackBy",e.trackByFn))},directives:[o.s,o.Z,o.k,o.F,o.X,o.j,o.t,o.n,o.D,o.K,n.l,o.o,f.a,o.p,o.q,o.B,o.A,n.m,o.w,C.a,o.C,o.G,o.J,o.z],styles:[".circle[_ngcontent-%COMP%]{justify-content:center;align-items:center;border-radius:50px;min-height:40px;min-width:40px;text-align:center;display:flex;margin-top:.2rem;margin-bottom:.2rem}.candi[_ngcontent-%COMP%]{height:var(--avatar-height);width:var(--avatar-width);margin:var(--avatar-margin)}.avatar[_ngcontent-%COMP%]{display:grid;align-items:center;text-align:center}.avatarItem[_ngcontent-%COMP%]{grid-row:1;grid-column:1}.avatarTxtItem[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#000;opacity:.4}.img[_ngcontent-%COMP%]{background:none}.noImg[_ngcontent-%COMP%]{background:#d3d3d3}.candidateLabel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.candidateName[_ngcontent-%COMP%]{margin-left:1rem;text-overflow:ellipsis;white-space:normal;width:70%}.candidateNotActive[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.candidateProgress[_ngcontent-%COMP%]{width:30%}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(e){return new(e||t)},imports:[[r.h.forChild(S)],r.h]}),t})();var I=i("ajeZ");let D=(()=>{class t{}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(e){return new(e||t)},imports:[[n.c,a.a,o.bb,k,f.f,I.a]]}),t})()}}]);