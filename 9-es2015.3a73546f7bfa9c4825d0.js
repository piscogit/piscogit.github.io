(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5Ma4":function(t,e,i){"use strict";i.r(e),i.d(e,"CandidtesPageModule",function(){return N});var n=i("ofXK"),a=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),s=i("mrSG"),d=i("fXoL"),c=i("L5fO");let l=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){this.totals={all:this.candidates.length,active:this.candidates.filter(t=>t.isActive).length,notActive:this.candidates.filter(t=>!t.isActive).length}}applyFilters(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(o.eb),d.Lb(c.b))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-candidates-filter"]],inputs:{status:"status",candidates:"candidates"},decls:20,vars:12,consts:[["translucent","true"],[3,"value"],["button","",3,"click"],["slot","start","value","active"],["slot","start","value","notActive"],["slot","start","value","all"]],template:function(t,e){1&t&&(d.Rb(0,"ion-header",0),d.Rb(1,"ion-toolbar"),d.Rb(2,"ion-title"),d.Rb(3,"span"),d.tc(4),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(5,"ion-content"),d.Rb(6,"ion-list"),d.Rb(7,"ion-radio-group",1),d.Rb(8,"ion-item",2),d.Zb("click",function(){return e.applyFilters("active")}),d.Rb(9,"ion-label"),d.tc(10),d.Qb(),d.Mb(11,"ion-radio",3),d.Qb(),d.Rb(12,"ion-item",2),d.Zb("click",function(){return e.applyFilters("notActive")}),d.Rb(13,"ion-label"),d.tc(14),d.Qb(),d.Mb(15,"ion-radio",4),d.Qb(),d.Rb(16,"ion-item",2),d.Zb("click",function(){return e.applyFilters("all")}),d.Rb(17,"ion-label"),d.tc(18),d.Qb(),d.Mb(19,"ion-radio",5),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t&&(d.Bb(2),d.qc("direction",e.langProvider.LangDirection),d.Bb(2),d.uc(e.langProvider.Select),d.Bb(2),d.qc("direction",e.langProvider.LangDirection),d.Bb(1),d.hc("value",e.status),d.Bb(3),d.wc("",e.langProvider.CandidatesFilterActive," (",e.totals.active,")"),d.Bb(4),d.wc("",e.langProvider.CandidatesFilterNotActive," (",e.totals.notActive,")"),d.Bb(4),d.wc("",e.langProvider.CandidatesFilterAll," (",e.totals.all,")"))},directives:[o.s,o.Z,o.X,o.n,o.D,o.I,o.kb,o.w,o.C,o.H,o.jb],styles:[""]}),t})();function b(t,e){if(1&t){const t=d.Sb();d.Rb(0,"ion-item"),d.Rb(1,"ion-label",10),d.Rb(2,"span"),d.tc(3),d.Qb(),d.Qb(),d.Rb(4,"ion-input",16),d.Zb("ngModelChange",function(e){return d.mc(t),d.bc().candidateNewGroup=e}),d.Qb(),d.Qb()}if(2&t){const t=d.bc();d.Bb(3),d.uc(t.langProvider.CreateCandidateNewGroup),d.Bb(1),d.hc("ngModel",t.candidateNewGroup)}}let u=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}back(){this.modalCtrl.dismiss()}activate(){return Object(s.a)(this,void 0,void 0,function*(){const t=[];if(this.candidateLastNumber>0)for(let e=this.candidateFirstNumber;e<=this.candidateLastNumber;e++)t.push(e);else t.push(this.candidateFirstNumber);this.modalCtrl.dismiss({numbers:t,group:this.candidateGroup,newGroup:this.candidateNewGroup})})}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(o.eb),d.Lb(c.b))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-create-candidates"]],inputs:{title:"title",action:"action",actionColor:"actionColor",isNewGroup:"isNewGroup"},decls:34,vars:15,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"container"],[3,"ngSubmit"],["form","ngForm"],["justify-content-center",""],["align-self-center","","size-md","6","size-lg","5","size-xs","12"],["text-center",""],["padding",""],["position","floating"],["name","candidateNumber","type","number","autofocus","true","required","",3,"placeholder","ngModel","ngModelChange"],["name","totalCandidates","type","number",3,"placeholder","ngModel","ngModelChange"],["name","candidateGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["size","large","type","submit","expand","block",3,"color","disabled"],["name","candidateNewGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(d.Rb(0,"ion-header"),d.Rb(1,"ion-toolbar"),d.Rb(2,"ion-title"),d.tc(3),d.Qb(),d.Rb(4,"ion-buttons",0),d.Rb(5,"ion-button",1),d.Zb("click",function(){return e.back()}),d.Mb(6,"ion-icon",2),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(7,"div",3),d.Rb(8,"form",4,5),d.Zb("ngSubmit",function(){return e.activate()}),d.Rb(10,"ion-grid"),d.Rb(11,"ion-row",6),d.Rb(12,"ion-col",7),d.Mb(13,"div",8),d.Rb(14,"div",9),d.Rb(15,"ion-item"),d.Rb(16,"ion-label",10),d.Rb(17,"span"),d.tc(18),d.Qb(),d.Qb(),d.Rb(19,"ion-input",11),d.Zb("ngModelChange",function(t){return e.candidateFirstNumber=t}),d.Qb(),d.Qb(),d.Rb(20,"ion-item"),d.Rb(21,"ion-label",10),d.Rb(22,"span"),d.tc(23),d.Qb(),d.Qb(),d.Rb(24,"ion-input",12),d.Zb("ngModelChange",function(t){return e.candidateLastNumber=t}),d.Qb(),d.Qb(),d.Rb(25,"ion-item"),d.Rb(26,"ion-label",10),d.Rb(27,"span"),d.tc(28),d.Qb(),d.Qb(),d.Rb(29,"ion-input",13),d.Zb("ngModelChange",function(t){return e.candidateGroup=t}),d.Qb(),d.Qb(),d.rc(30,b,5,2,"ion-item",14),d.Qb(),d.Rb(31,"div",9),d.Rb(32,"ion-button",15),d.tc(33),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t){const t=d.lc(9);d.Bb(2),d.qc("direction",e.langProvider.LangDirection),d.Bb(1),d.uc(e.title),d.Bb(4),d.qc("direction",e.langProvider.LangDirection),d.Bb(11),d.uc(e.langProvider.CreateCandidateFirsrNumber),d.Bb(1),d.hc("ngModel",e.candidateFirstNumber),d.Bb(4),d.uc(e.langProvider.CreateCandidateLastNumber),d.Bb(1),d.hc("ngModel",e.candidateLastNumber),d.Bb(4),d.uc(e.langProvider.CreateCandidateGroup),d.Bb(1),d.hc("ngModel",e.candidateGroup),d.Bb(1),d.hc("ngIf",e.isNewGroup),d.Bb(2),d.hc("color",e.actionColor)("disabled",t.invalid),d.Bb(1),d.vc(" ",e.action," ")}},directives:[o.s,o.Z,o.X,o.k,o.j,o.t,a.j,a.f,a.g,o.r,o.M,o.m,o.w,o.C,o.v,o.gb,a.i,a.e,a.h,n.m],styles:[".container[_ngcontent-%COMP%]{height:100%;margin-top:20%}"]}),t})();var g=i("3LWr"),h=i("NrBX"),p=i("zrcv"),v=i("VYsW"),m=i("ufmx"),f=i("5+WD"),C=i("g1yl");function w(t,e){if(1&t){const t=d.Sb();d.Rb(0,"ion-item-option",27),d.Zb("click",function(){d.mc(t);const e=d.bc().$implicit;return d.bc().changeActiveStatus(e,!0)}),d.Rb(1,"span"),d.tc(2),d.Qb(),d.Qb()}if(2&t){const t=d.bc(2);d.Bb(2),d.uc(t.langProvider.CandidateActive)}}function y(t,e){if(1&t){const t=d.Sb();d.Rb(0,"ion-item-option",16),d.Zb("click",function(){d.mc(t);const e=d.bc().$implicit;return d.bc().changeActiveStatus(e,!1)}),d.Rb(1,"span"),d.tc(2),d.Qb(),d.Qb()}if(2&t){const t=d.bc(2);d.Bb(2),d.uc(t.langProvider.CandidateNotActive)}}function R(t,e){if(1&t&&(d.Rb(0,"span",28),d.tc(1),d.Qb()),2&t){const t=d.bc().$implicit;d.Bb(1),d.vc(" ",t.name," ")}}function Q(t,e){if(1&t&&(d.Rb(0,"span"),d.tc(1),d.Qb()),2&t){const t=d.bc(2).$implicit,e=d.bc();d.Bb(1),d.wc(" ",e.langProvider.GroupShort," ",t.group," ")}}function P(t,e){if(1&t&&(d.Rb(0,"div",29),d.rc(1,Q,2,2,"span",30),d.Rb(2,"span"),d.tc(3),d.Qb(),d.Qb()),2&t){const t=d.bc().$implicit,e=d.bc();d.Bb(1),d.hc("ngIf",e.isMultipleGroupsAllowed),d.Bb(2),d.wc(" ",e.langProvider.Candidate," ",t.number," ")}}function M(t,e){if(1&t){const t=d.Sb();d.Rb(0,"ion-item-sliding"),d.Rb(1,"ion-item-options",18),d.rc(2,w,3,1,"ion-item-option",19),d.rc(3,y,3,1,"ng-template",null,20,d.sc),d.Qb(),d.Rb(5,"ion-item",21),d.Zb("click",function(){d.mc(t);const i=e.$implicit;return d.bc().onCadidateSelected(i)}),d.Mb(6,"app-candidate-avatar",22),d.Rb(7,"ion-label"),d.Rb(8,"div",23),d.rc(9,R,2,1,"span",24),d.rc(10,P,4,3,"ng-template",null,25,d.sc),d.Mb(12,"ion-progress-bar",26),d.Qb(),d.Qb(),d.Mb(13,"ion-reorder",1),d.Qb(),d.Qb()}if(2&t){const t=e.$implicit,i=d.lc(4),n=d.lc(11),a=d.bc();d.Bb(2),d.hc("ngIf",!1===t.isActive)("ngIfElse",i),d.Bb(3),d.hc("hidden",a.checkVisibiltyStatus(t)),d.Bb(1),d.hc("candidate",t),d.Bb(2),d.Db("candidateNotActive",!1===t.isActive),d.Bb(1),d.hc("ngIf",t.name)("ngIfElse",n),d.Bb(3),d.hc("color",t.coveragePctColor)("value",t.coveragePct)}}const S=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a,o,r,s){this.router=t,this.store=e,this.taskDelegator=i,this.msgService=n,this.appContext=a,this.modalCtrl=o,this.candidatesDelegator=r,this.langProvider=s,this.filterStatus="active",this.isInit=!1}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){this.isMultipleGroupsAllowed=(yield this.taskDelegator.getCategoryConfig()).isMultipleGroupsAllowed,this.store.candidates.subscribe(t=>{if(this.candidates=t,null!=t)if(t.length>0){this.candidates=null==t?void 0:t.sort((t,e)=>{var i,n;return(null!==(i=t.listOrder)&&void 0!==i?i:t.number)-(null!==(n=e.listOrder)&&void 0!==n?n:e.number)});for(const t of this.candidates)t.coveragePct=100,t.coveragePctColor="secondary"}else this.store.categoryConfig.value.isCreateCandidatesIfEmpty&&this.showCreateCandidates()})})}onCadidateSelected(t){this.router.navigate(["tabs/candidates/candidate-details/dummy",{candidateId:t._id}],{skipLocationChange:!0})}doReorder(t){return Object(s.a)(this,void 0,void 0,function*(){console.log("Dragged from index",t.detail.from,"to",t.detail.to),this.candidates=t.detail.complete(this.candidates),this.reorderCandidates(),yield this.candidatesDelegator.updateCandidates(this.candidates)})}reorderCandidates(){for(const[t,e]of this.candidates.entries())e.listOrder=t}trackByFn(t,e){return e?e._id:t}showCandidatesFilters(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:l,swipeToClose:!0,componentProps:{status:this.filterStatus,candidates:this.candidates}});yield t.present();const e=yield t.onWillDismiss();this.applyCandidatesFilters(e.data)})}applyCandidatesFilters(t){this.filterStatus=t}checkVisibiltyStatus(t){var e;let i=!0;return"active"===this.filterStatus?i=null===(e=t.isActive)||void 0===e||e:"notActive"===this.filterStatus&&(i=!1===t.isActive),!i}changeActiveStatus(t,e){return Object(s.a)(this,void 0,void 0,function*(){t.isActive=e,t.statusChangeDate=new Date,yield this.candidatesDelegator.updateCandidates([t]),e?yield this.msgService.showToast(this.langProvider.CandidateStatusChangedActive(t),500,"toastSuccess"):yield this.msgService.showToast(this.langProvider.CandidateStatusChangedNotActive(t),500,"toastWarn"),this.candidatesList.closeSlidingItems()})}showCreateCandidates(){var t,e,i,n,a;return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.CreateCandidateTitle,action:this.langProvider.Activate,actionColor:"primary"}});yield o.present();const r=yield o.onWillDismiss();if((null===(e=null===(t=r.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&(null===(i=r.data)||void 0===i?void 0:i.group)){const t=null===(n=this.candidates)||void 0===n?void 0:n.some(t=>r.data.numbers.find(e=>e===t.number&&r.data.group.toString()===t.group)),e=null===(a=this.candidates)||void 0===a?void 0:a.reduce((t,e)=>(t.add(e.group),t),new Set),i=yield this.taskDelegator.getCategoryConfig();t?this.msgService.showToast(this.langProvider.CreateCandidateDuplicateNumber,2e3,"toastWarn"):!i.isMultipleGroupsAllowed&&(null==e?void 0:e.size)>0&&!e.has(r.data.group.toString())?this.msgService.showToast(this.langProvider.CreateCandidateMultipleGroupsMain,2e3,"toastWarn"):(yield this.candidatesDelegator.createNewCandidates(r.data),this.msgService.showToast(this.langProvider.CandidatesCreatedSuccessfully(r.data.numbers.length),2e3,"toastSuccess"))}})}showEditCandidatesGroup(){var t,e,i,n,a;return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.ChangeCandidateGroupTitle,action:this.langProvider.Activate,actionColor:"primary",isNewGroup:!0}});yield o.present();const r=yield o.onWillDismiss();if((null===(e=null===(t=r.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&(null===(i=r.data)||void 0===i?void 0:i.group)&&(null===(n=r.data)||void 0===n?void 0:n.newGroup)){const t=r.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===r.data.group.toString())),e=null===(a=this.candidates)||void 0===a?void 0:a.filter(t=>!r.data.numbers.find(e=>{var i;return t.number===e&&t.group===(null===(i=r.data.newGroup)||void 0===i?void 0:i.toString())})).reduce((t,e)=>(t.add(e.group),t),new Set),i=yield this.taskDelegator.getCategoryConfig();t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.ChangeGroupCandidateNotExistNumber,2e3,"toastWarn"):!i.isMultipleGroupsAllowed&&t.length<this.candidates.length&&(null==e?void 0:e.size)>0&&!e.has(r.data.newGroup.toString())?this.msgService.showToast(this.langProvider.CreateCandidateMultipleGroupsMain,2e3,"toastWarn"):(t.forEach(t=>t.group=r.data.newGroup.toString()),yield this.candidatesDelegator.updateCandidates(t),this.msgService.showToast(this.langProvider.CandidatesChangedSuccessfully(r.data.numbers.length),2e3,"toastSuccess"))}})}showDeleteCandidates(){var t,e;return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.modalCtrl.create({component:u,swipeToClose:!0,componentProps:{title:this.langProvider.DeleteCandidateTitle,action:this.langProvider.Activate,actionColor:"danger"}});yield i.present();const n=yield i.onWillDismiss();if((null===(e=null===(t=n.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0){const t=n.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===n.data.group.toString()));t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.DeleteCandidateNotExistNumber,2e3,"toastWarn"):(yield this.candidatesDelegator.deleteCandidates(t),this.msgService.showToast(this.langProvider.CandidatesDeletedSuccessfully(n.data.numbers.length),2e3,"toastSuccess"))}})}}return t.\u0275fac=function(e){return new(e||t)(d.Lb(r.f),d.Lb(g.a),d.Lb(h.a),d.Lb(p.a),d.Lb(v.a),d.Lb(o.eb),d.Lb(m.a),d.Lb(c.b))},t.\u0275cmp=d.Fb({type:t,selectors:[["app-candidtes"]],viewQuery:function(t,e){if(1&t&&d.zc(o.D,1),2&t){let t;d.kc(t=d.ac())&&(e.candidatesList=t.first)}},inputs:{candidates:"candidates"},decls:25,vars:6,consts:[["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","options"],[1,"candidatesContainer",3,"fullscreen"],["disabled","false",3,"ionItemReorder"],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","vertical","bottom","slot","fixed","cdkDrag","","cdkDragBoundary",".candidatesContainer"],["color","dark",2,"opacity","0.6"],["md","caret-up","ios","chevron-up-circle-outline"],["side","top"],["color","secondary",3,"click"],["name","build"],["color","primary",3,"click"],["name","people"],["side","start"],["color","danger",3,"click"],["name","trash"],["side","end"],["color","success",3,"click",4,"ngIf","ngIfElse"],["notActive",""],["button","",3,"hidden","click"],["slot","start",1,"candi",3,"candidate"],[1,"candidateLabel"],["class","candidateName",4,"ngIf","ngIfElse"],["noName",""],[1,"candidateProgress",3,"color","value"],["color","success",3,"click"],[1,"candidateName"],[1,"candidateNameGroup"],[4,"ngIf"]],template:function(t,e){1&t&&(d.Rb(0,"ion-header"),d.Rb(1,"ion-toolbar"),d.Rb(2,"ion-buttons",0),d.Mb(3,"ion-menu-button"),d.Qb(),d.Rb(4,"ion-title"),d.tc(5),d.Qb(),d.Rb(6,"ion-buttons",1),d.Rb(7,"ion-button",2),d.Zb("click",function(){return e.showCandidatesFilters()}),d.Mb(8,"ion-icon",3),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(9,"ion-content",4),d.Rb(10,"ion-list"),d.Rb(11,"ion-reorder-group",5),d.Zb("ionItemReorder",function(t){return e.doReorder(t)}),d.rc(12,M,14,10,"ion-item-sliding",6),d.Qb(),d.Qb(),d.Rb(13,"ion-fab",7),d.Rb(14,"ion-fab-button",8),d.Mb(15,"ion-icon",9),d.Qb(),d.Rb(16,"ion-fab-list",10),d.Rb(17,"ion-fab-button",11),d.Zb("click",function(){return e.showEditCandidatesGroup()}),d.Mb(18,"ion-icon",12),d.Qb(),d.Rb(19,"ion-fab-button",13),d.Zb("click",function(){return e.showCreateCandidates()}),d.Mb(20,"ion-icon",14),d.Qb(),d.Qb(),d.Rb(21,"ion-fab-list",15),d.Rb(22,"ion-fab-button",16),d.Zb("click",function(){return e.showDeleteCandidates()}),d.Mb(23,"ion-icon",14),d.Mb(24,"ion-icon",17),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&t&&(d.Bb(4),d.qc("direction",e.langProvider.LangDirection),d.Bb(1),d.uc(e.langProvider.Candidates),d.Bb(4),d.hc("fullscreen",!0),d.Bb(3),d.hc("ngForOf",e.candidates)("ngForTrackBy",e.trackByFn))},directives:[o.s,o.Z,o.k,o.F,o.X,o.j,o.t,o.n,o.D,o.K,n.l,o.o,f.a,o.p,o.q,o.B,o.A,n.m,o.w,C.a,o.C,o.G,o.J,o.z],styles:[".circle[_ngcontent-%COMP%]{justify-content:center;align-items:center;border-radius:50px;min-height:40px;min-width:40px;text-align:center;display:flex;margin-top:.2rem;margin-bottom:.2rem}.candi[_ngcontent-%COMP%]{height:var(--avatar-height);width:var(--avatar-width);margin:var(--avatar-margin)}.avatar[_ngcontent-%COMP%]{display:grid;align-items:center;text-align:center}.avatarItem[_ngcontent-%COMP%]{grid-row:1;grid-column:1}.avatarTxtItem[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#000;opacity:.4}.img[_ngcontent-%COMP%]{background:none}.noImg[_ngcontent-%COMP%]{background:#d3d3d3}.candidateLabel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.candidateName[_ngcontent-%COMP%]{margin-left:1rem;width:70%}.candidateName[_ngcontent-%COMP%], .candidateNameGroup[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:normal}.candidateNameGroup[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:75%}.candidateNotActive[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.candidateProgress[_ngcontent-%COMP%]{width:25%}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({imports:[[r.h.forChild(S)],r.h]}),t})();var B=i("ajeZ");let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({imports:[[n.c,a.a,o.bb,k,f.f,B.a]]}),t})()}}]);