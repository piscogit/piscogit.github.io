(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"5Ma4":function(t,e,i){"use strict";i.r(e),i.d(e,"CandidtesPageModule",(function(){return I}));var n=i("ofXK"),a=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),s=i("mrSG"),c=i("fXoL"),d=i("L5fO");let l=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}applyFilters(t){this.modalCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(o.eb),c.Ib(d.b))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-candidates-filter"]],inputs:{status:"status"},decls:20,vars:9,consts:[["translucent","true"],[3,"value"],["button","",3,"click"],["slot","start","value","active"],["slot","start","value","notActive"],["slot","start","value","all"]],template:function(t,e){1&t&&(c.Nb(0,"ion-header",0),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.Nb(3,"span"),c.pc(4),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(5,"ion-content"),c.Nb(6,"ion-list"),c.Nb(7,"ion-radio-group",1),c.Nb(8,"ion-item",2),c.Vb("click",(function(){return e.applyFilters("active")})),c.Nb(9,"ion-label"),c.pc(10),c.Mb(),c.Jb(11,"ion-radio",3),c.Mb(),c.Nb(12,"ion-item",2),c.Vb("click",(function(){return e.applyFilters("notActive")})),c.Nb(13,"ion-label"),c.pc(14),c.Mb(),c.Jb(15,"ion-radio",4),c.Mb(),c.Nb(16,"ion-item",2),c.Vb("click",(function(){return e.applyFilters("all")})),c.Nb(17,"ion-label"),c.pc(18),c.Mb(),c.Jb(19,"ion-radio",5),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.yb(2),c.mc("direction",e.langProvider.LangDirection),c.yb(2),c.qc(e.langProvider.Select),c.yb(2),c.mc("direction",e.langProvider.LangDirection),c.yb(1),c.dc("value",e.status),c.yb(3),c.qc(e.langProvider.CandidatesFilterActive),c.yb(4),c.qc(e.langProvider.CandidatesFilterNotActive),c.yb(4),c.qc(e.langProvider.CandidatesFilterAll))},directives:[o.s,o.Z,o.X,o.n,o.D,o.I,o.kb,o.w,o.C,o.H,o.jb],styles:[""]}),t})();function b(t,e){if(1&t&&(c.Nb(0,"ion-item"),c.Nb(1,"ion-label"),c.Nb(2,"span"),c.pc(3),c.Mb(),c.Mb(),c.Mb()),2&t){const t=c.Xb();c.yb(3),c.qc(t.langProvider.CreateCandidateNewGroup)}}function u(t,e){if(1&t){const t=c.Ob();c.Nb(0,"ion-item"),c.Nb(1,"ion-input",13),c.Vb("ngModelChange",(function(e){return c.ic(t),c.Xb().candidateNewGroup=e})),c.Mb(),c.Mb()}if(2&t){const t=c.Xb();c.yb(1),c.dc("ngModel",t.candidateNewGroup)}}let g=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.langProvider=e}ngOnInit(){}back(){this.modalCtrl.dismiss()}activate(){return Object(s.a)(this,void 0,void 0,(function*(){const t=[];if(this.candidateLastNumber>0)for(let e=this.candidateFirstNumber;e<=this.candidateLastNumber;e++)t.push(e);else t.push(this.candidateFirstNumber);this.modalCtrl.dismiss({numbers:t,group:this.candidateGroup,newGroup:this.candidateNewGroup})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(o.eb),c.Ib(d.b))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-create-candidates"]],inputs:{title:"title",action:"action",actionColor:"actionColor",isNewGroup:"isNewGroup"},decls:35,vars:16,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"container"],[3,"ngSubmit"],["form","ngForm"],["justify-content-center",""],["align-self-center","","size-md","6","size-lg","5","size-xs","12"],["text-center",""],["padding",""],["position","floating"],["name","candidateNumber","type","number","autofocus","true","required","",3,"placeholder","ngModel","ngModelChange"],["name","totalCandidates","type","number",3,"placeholder","ngModel","ngModelChange"],["name","candidateGroup","type","number","required","",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["size","large","type","submit","expand","block",3,"color","disabled"]],template:function(t,e){if(1&t&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.pc(3),c.Mb(),c.Nb(4,"ion-buttons",0),c.Nb(5,"ion-button",1),c.Vb("click",(function(){return e.back()})),c.Jb(6,"ion-icon",2),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(7,"div",3),c.Nb(8,"form",4,5),c.Vb("ngSubmit",(function(){return e.activate()})),c.Nb(10,"ion-grid"),c.Nb(11,"ion-row",6),c.Nb(12,"ion-col",7),c.Jb(13,"div",8),c.Nb(14,"div",9),c.Nb(15,"ion-item"),c.Nb(16,"ion-label",10),c.Nb(17,"span"),c.pc(18),c.Mb(),c.Mb(),c.Nb(19,"ion-input",11),c.Vb("ngModelChange",(function(t){return e.candidateFirstNumber=t})),c.Mb(),c.Mb(),c.Nb(20,"ion-item"),c.Nb(21,"ion-label",10),c.Nb(22,"span"),c.pc(23),c.Mb(),c.Mb(),c.Nb(24,"ion-input",12),c.Vb("ngModelChange",(function(t){return e.candidateLastNumber=t})),c.Mb(),c.Mb(),c.Nb(25,"ion-item"),c.Nb(26,"ion-label",10),c.Nb(27,"span"),c.pc(28),c.Mb(),c.Mb(),c.Nb(29,"ion-input",13),c.Vb("ngModelChange",(function(t){return e.candidateGroup=t})),c.Mb(),c.Mb(),c.nc(30,b,4,1,"ion-item",14),c.nc(31,u,2,1,"ion-item",14),c.Mb(),c.Nb(32,"div",9),c.Nb(33,"ion-button",15),c.pc(34),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t){const t=c.hc(9);c.yb(2),c.mc("direction",e.langProvider.LangDirection),c.yb(1),c.qc(e.title),c.yb(4),c.mc("direction",e.langProvider.LangDirection),c.yb(11),c.qc(e.langProvider.CreateCandidateFirsrNumber),c.yb(1),c.dc("ngModel",e.candidateFirstNumber),c.yb(4),c.qc(e.langProvider.CreateCandidateLastNumber),c.yb(1),c.dc("ngModel",e.candidateLastNumber),c.yb(4),c.qc(e.langProvider.CreateCandidateGroup),c.yb(1),c.dc("ngModel",e.candidateGroup),c.yb(1),c.dc("ngIf",e.isNewGroup),c.yb(1),c.dc("ngIf",e.isNewGroup),c.yb(2),c.dc("color",e.actionColor)("disabled",t.invalid),c.yb(1),c.rc(" ",e.action," ")}},directives:[o.s,o.Z,o.X,o.k,o.j,o.t,a.i,a.e,a.f,o.r,o.M,o.m,o.w,o.C,o.v,o.gb,a.h,a.d,a.g,n.m],styles:[".container[_ngcontent-%COMP%]{height:100%;margin-top:20%}"]}),t})();var p=i("3LWr"),m=i("zrcv"),h=i("ufmx"),v=i("5+WD"),f=i("g1yl");function C(t,e){if(1&t){const t=c.Ob();c.Nb(0,"ion-item-option",27),c.Vb("click",(function(){c.ic(t);const e=c.Xb().$implicit;return c.Xb().changeActiveStatus(e,!0)})),c.Nb(1,"span"),c.pc(2),c.Mb(),c.Mb()}if(2&t){const t=c.Xb(2);c.yb(2),c.qc(t.langProvider.CandidateActive)}}function y(t,e){if(1&t){const t=c.Ob();c.Nb(0,"ion-item-option",16),c.Vb("click",(function(){c.ic(t);const e=c.Xb().$implicit;return c.Xb().changeActiveStatus(e,!1)})),c.Nb(1,"span"),c.pc(2),c.Mb(),c.Mb()}if(2&t){const t=c.Xb(2);c.yb(2),c.qc(t.langProvider.CandidateNotActive)}}function N(t,e){if(1&t&&(c.Nb(0,"span",28),c.pc(1),c.Mb()),2&t){const t=c.Xb().$implicit;c.yb(1),c.rc(" ",t.name," ")}}function M(t,e){if(1&t&&(c.Nb(0,"span",28),c.pc(1),c.Mb()),2&t){const t=c.Xb().$implicit,e=c.Xb();c.yb(1),c.sc(" ",e.langProvider.Candidate," ",t.number," ")}}function w(t,e){if(1&t){const t=c.Ob();c.Nb(0,"ion-item-sliding"),c.Nb(1,"ion-item-options",18),c.nc(2,C,3,1,"ion-item-option",19),c.nc(3,y,3,1,"ng-template",null,20,c.oc),c.Mb(),c.Nb(5,"ion-item",21),c.Vb("click",(function(){c.ic(t);const i=e.$implicit;return c.Xb().onCadidateSelected(i)})),c.Jb(6,"app-candidate-avatar",22),c.Nb(7,"ion-label"),c.Nb(8,"div",23),c.nc(9,N,2,1,"span",24),c.nc(10,M,2,2,"ng-template",null,25,c.oc),c.Jb(12,"ion-progress-bar",26),c.Mb(),c.Mb(),c.Jb(13,"ion-reorder",1),c.Mb(),c.Mb()}if(2&t){const t=e.$implicit,i=c.hc(4),n=c.hc(11),a=c.Xb();c.yb(2),c.dc("ngIf",!1===t.isActive)("ngIfElse",i),c.yb(3),c.dc("hidden",a.checkVisibiltyStatus(t)),c.yb(1),c.dc("candidate",t),c.yb(2),c.Ab("candidateNotActive",!1===t.isActive),c.yb(1),c.dc("ngIf",t.name)("ngIfElse",n),c.yb(3),c.dc("color",t.coveragePctColor)("value",t.coveragePct)}}const P=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a,o){this.router=t,this.store=e,this.msgService=i,this.modalCtrl=n,this.candidatesDelegator=a,this.langProvider=o,this.filterStatus="active",this.isInit=!1}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){this.store.candidates.subscribe(t=>{if(null!=t)if(t.length>0){this.candidates=null==t?void 0:t.sort((t,e)=>{var i,n;return(null!==(i=t.listOrder)&&void 0!==i?i:t.number)-(null!==(n=e.listOrder)&&void 0!==n?n:e.number)});for(const t of this.candidates)t.coveragePct=100,t.coveragePctColor="secondary"}else this.store.categoryConfig.value.isCreateCandidatesIfEmpty&&this.showCreateCandidates()})}))}onCadidateSelected(t){this.router.navigate(["tabs/candidates/candidate-details/dummy",{candidateId:t._id}],{skipLocationChange:!0})}doReorder(t){return Object(s.a)(this,void 0,void 0,(function*(){console.log("Dragged from index",t.detail.from,"to",t.detail.to),this.candidates=t.detail.complete(this.candidates),this.reorderCandidates(),yield this.candidatesDelegator.updateCandidates(this.candidates)}))}reorderCandidates(){for(const[t,e]of this.candidates.entries())e.listOrder=t}trackByFn(t,e){return e?e._id:t}showCandidatesFilters(){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:l,swipeToClose:!0,componentProps:{status:this.filterStatus}});yield t.present();const e=yield t.onWillDismiss();this.applyCandidatesFilters(e.data)}))}applyCandidatesFilters(t){this.filterStatus=t}checkVisibiltyStatus(t){var e;let i=!0;return"active"===this.filterStatus?i=null===(e=t.isActive)||void 0===e||e:"notActive"===this.filterStatus&&(i=!1===t.isActive),!i}changeActiveStatus(t,e){return Object(s.a)(this,void 0,void 0,(function*(){t.isActive=e,t.statusChangeDate=new Date,yield this.candidatesDelegator.updateCandidates([t]),e?yield this.msgService.showToast(this.langProvider.CandidateStatusChangedActive(t),500,"toastSuccess"):yield this.msgService.showToast(this.langProvider.CandidateStatusChangedNotActive(t),500,"toastWarn"),this.candidatesList.closeSlidingItems()}))}showCreateCandidates(){var t,e,i;return Object(s.a)(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:g,swipeToClose:!0,componentProps:{title:this.langProvider.CreateCandidateTitle,action:this.langProvider.Activate,actionColor:"primary"}});yield n.present();const a=yield n.onWillDismiss();(null===(e=null===(t=a.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0&&((null===(i=this.candidates)||void 0===i?void 0:i.some(t=>a.data.numbers.find(e=>e===t.number&&a.data.group.toString()===t.group)))?this.msgService.showToast(this.langProvider.CreateCandidateDuplicateNumber,1e3,"toastWarn"):(yield this.candidatesDelegator.createNewCandidates(a.data),this.msgService.showToast(this.langProvider.CandidatesCreatedSuccessfully(a.data.numbers.length),1e3,"toastSuccess")))}))}showEditCandidatesGroup(){var t,e;return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:g,swipeToClose:!0,componentProps:{title:this.langProvider.ChangeCandidateGroupTitle,action:this.langProvider.Activate,actionColor:"primary",isNewGroup:!0}});yield i.present();const n=yield i.onWillDismiss();if((null===(e=null===(t=n.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0){const t=n.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===n.data.group.toString()));t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.ChangeGroupCandidateNotExistNumber,1e3,"toastWarn"):(t.forEach(t=>t.group=n.data.newGroup.toString()),yield this.candidatesDelegator.updateCandidates(t),this.msgService.showToast(this.langProvider.CandidatesChangedSuccessfully(n.data.numbers.length),1e3,"toastSuccess"))}}))}showDeleteCandidates(){var t,e;return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.modalCtrl.create({component:g,swipeToClose:!0,componentProps:{title:this.langProvider.DeleteCandidateTitle,action:this.langProvider.Activate,actionColor:"danger"}});yield i.present();const n=yield i.onWillDismiss();if((null===(e=null===(t=n.data)||void 0===t?void 0:t.numbers)||void 0===e?void 0:e.length)>0){const t=n.data.numbers.map(t=>this.candidates.find(e=>e.number===t&&e.group===n.data.group.toString()));t.filter(t=>!t).length>0?this.msgService.showToast(this.langProvider.DeleteCandidateNotExistNumber,1e3,"toastWarn"):(yield this.candidatesDelegator.deleteCandidates(t),this.msgService.showToast(this.langProvider.CandidatesDeletedSuccessfully(n.data.numbers.length),1e3,"toastSuccess"))}}))}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(r.f),c.Ib(p.a),c.Ib(m.a),c.Ib(o.eb),c.Ib(h.a),c.Ib(d.b))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-candidtes"]],viewQuery:function(t,e){var i;1&t&&c.vc(o.D,!0),2&t&&c.gc(i=c.Wb())&&(e.candidatesList=i.first)},inputs:{candidates:"candidates"},decls:25,vars:6,consts:[["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","options"],[1,"candidatesContainer",3,"fullscreen"],["disabled","false",3,"ionItemReorder"],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","vertical","bottom","slot","fixed","cdkDrag","","cdkDragBoundary",".candidatesContainer"],["color","dark",2,"opacity","0.6"],["md","caret-up","ios","chevron-up-circle-outline"],["side","top"],["color","secondary",3,"click"],["name","build"],["color","primary",3,"click"],["name","people"],["side","start"],["color","danger",3,"click"],["name","trash"],["side","end"],["color","success",3,"click",4,"ngIf","ngIfElse"],["notActive",""],["button","",3,"hidden","click"],["slot","start",1,"candi",3,"candidate"],[1,"candidateLabel"],["class","candidateName",4,"ngIf","ngIfElse"],["noName",""],[1,"candidateProgress",3,"color","value"],["color","success",3,"click"],[1,"candidateName"]],template:function(t,e){1&t&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-buttons",0),c.Jb(3,"ion-menu-button"),c.Mb(),c.Nb(4,"ion-title"),c.pc(5),c.Mb(),c.Nb(6,"ion-buttons",1),c.Nb(7,"ion-button",2),c.Vb("click",(function(){return e.showCandidatesFilters()})),c.Jb(8,"ion-icon",3),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(9,"ion-content",4),c.Nb(10,"ion-list"),c.Nb(11,"ion-reorder-group",5),c.Vb("ionItemReorder",(function(t){return e.doReorder(t)})),c.nc(12,w,14,10,"ion-item-sliding",6),c.Mb(),c.Mb(),c.Nb(13,"ion-fab",7),c.Nb(14,"ion-fab-button",8),c.Jb(15,"ion-icon",9),c.Mb(),c.Nb(16,"ion-fab-list",10),c.Nb(17,"ion-fab-button",11),c.Vb("click",(function(){return e.showEditCandidatesGroup()})),c.Jb(18,"ion-icon",12),c.Mb(),c.Nb(19,"ion-fab-button",13),c.Vb("click",(function(){return e.showCreateCandidates()})),c.Jb(20,"ion-icon",14),c.Mb(),c.Mb(),c.Nb(21,"ion-fab-list",15),c.Nb(22,"ion-fab-button",16),c.Vb("click",(function(){return e.showDeleteCandidates()})),c.Jb(23,"ion-icon",14),c.Jb(24,"ion-icon",17),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.yb(4),c.mc("direction",e.langProvider.LangDirection),c.yb(1),c.qc(e.langProvider.Candidates),c.yb(4),c.dc("fullscreen",!0),c.yb(3),c.dc("ngForOf",e.candidates)("ngForTrackBy",e.trackByFn))},directives:[o.s,o.Z,o.k,o.F,o.X,o.j,o.t,o.n,o.D,o.K,n.l,o.o,v.a,o.p,o.q,o.B,o.A,n.m,o.w,f.a,o.C,o.G,o.J,o.z],styles:[".circle[_ngcontent-%COMP%]{justify-content:center;align-items:center;border-radius:50px;min-height:40px;min-width:40px;text-align:center;display:flex;margin-top:.2rem;margin-bottom:.2rem}.candi[_ngcontent-%COMP%]{height:var(--avatar-height);width:var(--avatar-width);margin:var(--avatar-margin)}.avatar[_ngcontent-%COMP%]{display:grid;align-items:center;text-align:center}.avatarItem[_ngcontent-%COMP%]{grid-row:1;grid-column:1}.avatarTxtItem[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#000;opacity:.4}.img[_ngcontent-%COMP%]{background:none}.noImg[_ngcontent-%COMP%]{background:#d3d3d3}.candidateLabel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.candidateName[_ngcontent-%COMP%]{margin-left:1rem;text-overflow:ellipsis;white-space:normal;width:70%}.candidateNotActive[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.candidateProgress[_ngcontent-%COMP%]{width:30%}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[r.h.forChild(P)],r.h]}),t})();var S=i("ajeZ");let I=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[n.c,a.a,o.bb,k,v.f,S.a]]}),t})()}}]);